var yt=n=>n.key==="Escape",U=n=>t=>{yt(t)&&(t.preventDefault(),n())};function tt(){return Math.random().toString(36).substr(2,9)}var et=function(){let n=0;return function(){return n++,n}}(),nt=()=>{let n=new Date,t=n.getDate(),e=["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],o=n.getMonth(),s=e[o];return`${t} ${s}`};function D(n,t,e,o,s){n.value.trim().length>t?(e.textContent=o,n.classList.add("has-error"),s.disabled=!0):(e.textContent="",n.classList.remove("has-error"),s.disabled=!1)}function M(n,t,e){let o=n.value.trim()!=="",s=!n.classList.contains("has-error"),i=!t.classList.contains("has-error");e.disabled=!o||!s||!i}function ot(){let n=new Date,t={rendered:!1,localDate:new Date,prevMonthLastDate:null,calWeekDays:["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],calMonthName:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0440\u0432\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],daysInMonth:function(e,o){return new Date(o,e,0).getDate()},firstDay:function(){return new Date(n.getFullYear(),n.getMonth(),1)},lastDay:function(){return new Date(n.getFullYear(),n.getMonth()+1,0)},firstDayNumber:function(){let e=t.firstDay().getDay();return e===0?7:e},lastDayNumber:function(){return t.lastDay().getDay()+1},getPreviousMonthLastDate:function(){return new Date(n.getFullYear(),n.getMonth(),0).getDate()},navigateToPreviousMonth:function(){n.setMonth(n.getMonth()-1),t.attachEventsOnNextPrev()},navigateToNextMonth:function(){n.setMonth(n.getMonth()+1),t.attachEventsOnNextPrev()},navigateToCurrentMonth:function(){let e=t.localDate.getMonth(),o=t.localDate.getFullYear();n.setMonth(e),n.setYear(o),t.attachEventsOnNextPrev()},displayYear:function(){let e=document.querySelector(".calendar .calendar-year-label");e.innerHTML=n.getFullYear()},displayMonth:function(){let e=document.querySelector(".calendar .calendar-month-label");e.innerHTML=t.calMonthName[n.getMonth()]},plotSelectors:function(){let e=document.querySelector(".calendar"),o=document.createElement("div");o.classList.add("calendar-inner");let s=document.createElement("div");s.classList.add("calendar-controls");let i=document.createElement("div");i.classList.add("calendar-prev");let a=document.createElement("a");a.setAttribute("href","#");let c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("width","128"),c.setAttribute("height","128"),c.setAttribute("viewBox","0 0 128 128");let l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("fill","#666"),l.setAttribute("d","M88.2 3.8L35.8 56.23 28 64l7.8 7.78 52.4 52.4 9.78-7.76L45.58 64l52.4-52.4z"),c.appendChild(l),a.appendChild(c),i.appendChild(a);let r=document.createElement("div");r.classList.add("calendar-year-month");let _=document.createElement("div");_.classList.add("calendar-month-label");let k=document.createElement("div");k.textContent="-";let q=document.createElement("div");q.classList.add("calendar-year-label"),r.appendChild(_),r.appendChild(k),r.appendChild(q);let d=document.createElement("div");d.classList.add("calendar-next");let y=document.createElement("a");y.setAttribute("href","#");let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("xmlns","http://www.w3.org/2000/svg"),p.setAttribute("width","128"),p.setAttribute("height","128"),p.setAttribute("viewBox","0 0 128 128");let S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("fill","#666"),S.setAttribute("d","M38.8 124.2l52.4-52.42L99 64l-7.77-7.78-52.4-52.4-9.8 7.77L81.44 64 29 116.42z"),p.appendChild(S),y.appendChild(p),d.appendChild(y),s.appendChild(i),s.appendChild(r),s.appendChild(d);let L=document.createElement("div");L.classList.add("calendar-body"),o.appendChild(s),o.appendChild(L),e.appendChild(o)},plotDayNames:function(){let e=document.querySelector(".calendar .calendar-body");t.calWeekDays.forEach(o=>{let s=document.createElement("div");s.textContent=o,e.appendChild(s)})},plotDates:function(){let e=document.querySelector(".calendar .calendar-body");t.rendered||(t.plotSelectors(),t.rendered=!0),e.innerHTML="",t.plotDayNames(),t.displayMonth(),t.displayYear();let o=1,s=0;t.prevMonthLastDate=t.getPreviousMonthLastDate();let i=[],a=t.daysInMonth(n.getMonth()+1,n.getFullYear());for(let c=1;c<a;c++)if(c<t.firstDayNumber()){s+=1;let l=document.createElement("div");l.classList.add("prev-dates"),e.appendChild(l),i.push(t.prevMonthLastDate--)}else{let l=document.createElement("div");l.classList.add("number-item"),l.setAttribute("data-num",o);let r=document.createElement("a");r.classList.add("dateNumber"),r.href="#",r.textContent=o++,l.appendChild(r),e.appendChild(l)}for(let c=0;c<s+1;c++){let l=document.createElement("div");l.classList.add("number-item"),l.setAttribute("data-num",o);let r=document.createElement("a");r.classList.add("dateNumber"),r.href="#",r.textContent=o++,l.appendChild(r),e.appendChild(l)}t.highlightToday(),t.plotPrevMonthDates(i),t.plotNextMonthDates()},attachEvents:function(){let e=document.querySelector(".calendar .calendar-prev a"),o=document.querySelector(".calendar .calendar-next a"),s=document.querySelectorAll(".calendar .dateNumber");e.addEventListener("click",t.navigateToPreviousMonth),o.addEventListener("click",t.navigateToNextMonth);for(var i=0;i<s.length;i++)s[i].addEventListener("click",t.selectDate,!1)},highlightToday:function(){let e=t.localDate.getMonth()+1,o=n.getMonth()+1,s=t.localDate.getFullYear(),i=n.getFullYear();s===i&&e===o&&document.querySelectorAll(".number-item")&&document.querySelectorAll(".number-item")[n.getDate()-1].classList.add("calendar-today")},plotPrevMonthDates:function(e){e.reverse();for(let o=0;o<e.length;o++)document.querySelectorAll(".prev-dates")&&(document.querySelectorAll(".prev-dates")[o].textContent=e[o])},plotNextMonthDates:function(){let e=document.querySelector(".calendar-body").childElementCount;if(e>42){let o=49-e;t.loopThroughNextDays(o)}if(e>35&&e<=42){let o=42-e;t.loopThroughNextDays(42-e)}},loopThroughNextDays:function(e){let o=document.querySelector(".calendar-body");if(e>0)for(let s=1;s<=e;s++){let i=document.createElement("div");i.classList.add("next-dates"),i.textContent=s,o.appendChild(i)}},attachEventsOnNextPrev:function(){t.plotDates(),t.attachEvents()},init:function(){t.rendered||(t.plotSelectors(),t.rendered=!0),t.plotDates(),t.attachEvents()}};t.init()}function V(){document.querySelectorAll(".editor").forEach(t=>{t.addEventListener("input",()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"})})}function W(n){let t=document.getElementById("dateInput"),e=document.querySelector(".calendar"),o=document.getElementById("priorityInput"),s=document.querySelector(".popup-priority"),i=document.querySelectorAll(".popup-priority__item"),a=document.querySelector(".task-editor__priority-label"),c=document.getElementById("projectInput"),l=document.querySelector(".popup-project"),r=document.querySelector(".popup-project__list"),_=document.querySelector(".popup-project_btn-reset"),k=document.querySelector(".popup-project__list-empty"),q=new ot;function d(u,h,E){return function(I){I.stopPropagation(),u.classList.contains("task-editor__popup--open")?E():h()}}o.addEventListener("click",d(s,m,f)),c.addEventListener("click",d(l,j,w)),_.addEventListener("click",()=>{c.value="",w()}),i.forEach(function(u){u.addEventListener("click",function(){let h=u.textContent.trim();switch(o.value=h,a.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),h){case"\u0421\u0440\u043E\u0447\u043D\u043E":a.classList.add("task-editor__priority-label--priority1");break;case"\u0412\u0430\u0436\u043D\u043E":a.classList.add("task-editor__priority-label--priority2");break;case"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":a.classList.add("task-editor__priority-label--priority3");break;default:break}f()})}),t.value=n,t.addEventListener("click",()=>{e.style.display==="block"?x():N()}),e.addEventListener("click",function(u){if(u.target.classList.contains("dateNumber")){let h=u.target.textContent.trim(),E=e.querySelector(".calendar-month-label").textContent.trim();t.value=`${h} ${E}`,x()}});let y=U(f),p=U(w),S=U(x);function L(){x(),f(),w()}function g(u,h){L(),u.classList.add("task-editor__popup--open"),document.addEventListener("keydown",h)}function C(u,h){u.classList.remove("task-editor__popup--open"),document.removeEventListener("keydown",h)}function m(){g(s,y)}function f(){C(s,y)}function j(){g(l,p),v()}function w(){C(l,p)}function N(){L(),e.style.display="block",document.addEventListener("keydown",S)}function x(){e.style.display="none",document.removeEventListener("keydown",S)}function v(){let h=document.querySelector(".projects__list-wrapper").querySelectorAll(".project__title");r.innerHTML="",h.forEach(E=>{let I=document.createElement("li");I.classList.add("popup-project__item");let X=document.createElement("span");X.textContent=E.textContent.trim(),I.appendChild(X),r.appendChild(I),I.addEventListener("click",function(){let P=I.textContent.trim();c.value=P,w()})}),A()}function A(){document.querySelectorAll(".popup-project__list li").length===0?k.style.display="block":k.style.display="none"}document.addEventListener("click",function(u){!s.contains(u.target)&&u.target!==o&&f(),!l.contains(u.target)&&u.target!==c&&w(),!e.contains(u.target)&&u.target!==t&&x()})}var Mt=document.querySelector(".sidebar"),rt=document.querySelectorAll(".new-item"),B=100,Y=500,T={TITLE:"\u0414\u043B\u0438\u043D\u0430 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 100 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",DISC:"\u0414\u043B\u0438\u043D\u0430 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 500 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."};var J=document.querySelector(".button-date"),K=J.querySelector(".button-date__title"),z=J.querySelector(".button-date__arrow--left"),R=J.querySelector(".button-date__arrow--right"),ht=document.querySelector(".dashboard .list-with-tasks__wrapper"),b=new Date;Q();F();R.addEventListener("click",function(){R.classList.contains("button-date__arrow--disabled")||(b.setDate(b.getDate()+1),Q(),F())});z.addEventListener("click",function(){z.classList.contains("button-date__arrow--disabled")||(b.setDate(b.getDate()-1),Q(),F())});function Q(){let n=new Date,t=new Date(n);t.setDate(t.getDate()+1),G(b,n)?K.textContent="\u0421\u0435\u0433\u043E\u0434\u043D\u044F":G(b,t)?K.textContent="\u0417\u0430\u0432\u0442\u0440\u0430":K.textContent=kt(b),_t()}function _t(){let n=new Date,t="button-date__arrow--disabled";z.classList.toggle(t,G(b,n)),R.classList.toggle(t,ft(b,n))}function F(){let n=ht.querySelectorAll(".task"),t=/(\d+)\s+(\S+)/;n.forEach(e=>{let o=e.querySelector(".task__data").textContent;if(o.trim()==="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"){e.classList.add("task--hidden");return}if(e.classList.contains("task--completed")){e.classList.add("task--hidden");return}let[,s,i]=o.match(t),a=new Date(b.getFullYear(),Z(i),parseInt(s));G(b,a)?e.classList.remove("task--hidden"):e.classList.add("task--hidden")})}function kt(n){let t={weekday:"long",month:"long",day:"numeric"};return n.toLocaleDateString("ru-RU",t)}function G(n,t){return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()}function ft(n,t){let e=new Date(t.getFullYear(),t.getMonth(),t.getDate()+7);return n>=e}function Z(n){return["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"].indexOf(n)}var st=document.querySelectorAll(".tasks__header-button"),at=document.querySelector(".tasks .list-with-tasks__wrapper");st.forEach(n=>{n.addEventListener("click",function(){st.forEach(t=>t.classList.remove("tasks__header-button--active")),n.classList.add("tasks__header-button--active"),H(n.textContent.trim())})});function H(n){at.querySelectorAll(".task").forEach(e=>{n==="\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044B\u0435"?e.classList.contains("task--completed")?e.classList.remove("task--hidden"):e.classList.add("task--hidden"):n==="\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435"?e.classList.contains("task--completed")||e.classList.contains("task--expired")?e.classList.add("task--hidden"):e.classList.remove("task--hidden"):n==="\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043D\u044B\u0435"&&(e.classList.contains("task--expired")?e.classList.remove("task--hidden"):e.classList.add("task--hidden"))})}function vt(n){let t=n.querySelector(".task__title"),e=n.dataset.id;n.classList.add("task--completed");let o=document.createElement("s");o.textContent=t.textContent,t.textContent="",t.appendChild(o),n.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#arrow-back"),n.style.transition="opacity 0.3s ease",n.style.opacity="0",setTimeout(()=>{n.classList.add("task--completed","task--hidden"),n.style.transition="",n.style.opacity=""},300),document.querySelectorAll('.list-with-tasks__wrapper .task[data-id="'+e+'"]').forEach(a=>{a.classList.add("task--completed");let c=a.querySelector(".task__title");if(!c.querySelector("s")){let r=document.createElement("s");r.textContent=c.textContent,c.textContent="",c.appendChild(r)}if(a.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#arrow-back"),a.classList.contains("task--expired")){a.classList.remove("task--expired");let r=a.querySelector(".task__info-expired");r&&r.remove()}})}function ct(){document.querySelectorAll(".button-complete-task").forEach(t=>{t.addEventListener("click",function(e){let o=e.target.closest(".task");o.classList.contains("task--completed")?Lt(o):vt(o)})})}function Lt(n){let t=n.querySelector(".task__title s");t&&(t.parentNode.textContent=t.textContent),n.classList.remove("task--completed"),n.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#checkmark");let o=n.dataset.id;document.querySelectorAll('.list-with-tasks__wrapper .task[data-id="'+o+'"]').forEach(a=>{let c=a.querySelector(".task__title s");c&&(c.parentNode.textContent=c.textContent),a.classList.remove("task--completed"),a.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#checkmark")});let i=document.querySelector(".tasks__header-button--active").textContent.trim();H(i),O()}function O(){let n=at.querySelectorAll(".task"),t=new Date;t.setHours(0,0,0,0),n.forEach(e=>{let o=e.querySelector(".task__data").textContent.trim();if(o==="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"){e.classList.add("task--hidden");return}let[,s,i]=o.match(/(\d+)\s+(\S+)/);if(new Date(t.getFullYear(),Z(i),parseInt(s)).getTime()<t.getTime()){e.classList.add("task--expired");let c=e.querySelector(".task__info-wrapper");if(!c.querySelector(".task__info-expired")){let l=document.createElement("span");l.classList.add("task__info-expired"),l.textContent="\u0417\u0430\u0434\u0430\u0447\u0430 \u043F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u0430",c.insertBefore(l,c.firstChild)}document.querySelector(".tasks__header-button--active").textContent!=="\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043D\u044B\u0435"&&e.classList.add("task--hidden")}else{e.classList.remove("task--expired");let c=e.querySelector(".task__info-expired");c&&c.remove()}})}function it(n,t,e=null){document.querySelectorAll(n).forEach(s=>{s.addEventListener("click",()=>{let i=s.closest(t);if(i)if(e){let a=i.dataset.id;document.querySelectorAll(`${t}[${e}="${a}"]`).forEach(l=>{l.remove()})}else i.remove()})})}function lt(n,t,e,o,s,i){let a=document.querySelectorAll(n),c=document.querySelector(e);a.forEach(l=>{l.addEventListener("click",()=>{let r=l.closest(t);if(r.classList.add(`${t.slice(1)}--edit`),r){let _=r.dataset.id,k=r.querySelector(o).textContent.trim(),q=r.querySelector(s).textContent.trim(),d=c.content.cloneNode(!0).querySelector(".task-editor"),y=d.querySelector('[name="title_task"]'),p=d.querySelector('[name="discription_task"]'),S=d.querySelector('[name="data_task"]'),L=d.querySelector('[name="priority_task"]'),g=d.querySelector('[name="project_task"]'),C=d.querySelector(".task-editor__priority-label"),m=d.querySelector(".task-editor__submit-btn"),f=document.createElement("span"),j=document.createElement("span");y.value=k,p.value=q,f.classList.add("task-editor__error"),j.classList.add("task-editor__error"),y.parentNode.appendChild(f),p.parentNode.appendChild(j),y.addEventListener("input",()=>{D(y,B,f,T.TITLE,m),M(y,p,m)}),p.addEventListener("input",()=>{D(p,Y,j,T.DISC,m),M(y,p,m)}),M(y,p,m),m.querySelector("use").setAttribute("href","icons/stack.svg#checkmark"),m.addEventListener("click",()=>{if(D(y,B,f,T.TITLE,m),D(p,Y,j,T.DISC,m),y.classList.contains("has-error")||p.classList.contains("has-error"))return;let v=y.value.trim(),A=p.value.trim();if(r.querySelector(o).textContent=v,r.querySelector(s).textContent=A,i){let h=S.value.trim(),E=L.value.trim(),I=g.value.trim();document.querySelectorAll(`.task[data-id="${_}"]`).forEach(P=>{P.querySelector(".task__title").textContent=v,P.querySelector(".task__discription").textContent=A,P.querySelector(".task__data").textContent=h,P.querySelector(".task__project").textContent=I;let $=P.querySelector(".task__circle");$.classList.remove("task__circle--priority1","task__circle--priority2","task__circle--priority3"),E==="\u0421\u0440\u043E\u0447\u043D\u043E"?$.classList.add("task__circle--priority1"):E==="\u0412\u0430\u0436\u043D\u043E"?$.classList.add("task__circle--priority2"):E==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&$.classList.add("task__circle--priority3")})}d.classList.add("task-editor--hidden"),d.addEventListener("transitionend",function h(){r.classList.remove(`${t.slice(1)}--edit`),d.remove(),d.removeEventListener("transitionend",h)},{once:!0}),F(),O();let u=document.querySelector(".tasks__header-button--active").textContent.trim();H(u)});let N=r.closest(".list, .projects__list").querySelector(".manager-item");N.innerHTML="",N.appendChild(d),d.classList.add("task-editor--visible");let x=d.querySelector(".task-editor__close-btn");if(x&&x.addEventListener("click",()=>{d.classList.add("task-editor--hidden"),d.addEventListener("transitionend",function v(){r.classList.remove(`${t.slice(1)}--edit`),d.remove(),d.removeEventListener("transitionend",v)},{once:!0})}),i){let v=r.querySelector(".task__data").textContent.trim(),A=r.querySelector(".task__project").textContent.trim(),u=r.querySelector(".task__circle").classList.contains("task__circle--priority1")?"\u0421\u0440\u043E\u0447\u043D\u043E":r.querySelector(".task__circle").classList.contains("task__circle--priority2")?"\u0412\u0430\u0436\u043D\u043E":r.querySelector(".task__circle").classList.contains("task__circle--priority3")?"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":"";S.value=v,g.value=A,L.value=u,u==="\u0421\u0440\u043E\u0447\u043D\u043E"?C.classList.add("task-editor__priority-label--priority1"):u==="\u0412\u0430\u0436\u043D\u043E"?C.classList.add("task-editor__priority-label--priority2"):u==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&C.classList.add("task-editor__priority-label--priority3"),W(v)}V()}})})}function dt(){it(".button-delete-task",".task","data-id")}function ut(){it(".button-delete-project",".project")}function pt(){lt(".button-edit-task",".task","#task-editor",".task__title",".task__discription",!0)}function mt(){lt(".button-edit-project",".project","#project-editor",".project__title",".project__discription",!1)}var St=document.querySelector("#task"),gt=document.querySelector("#project"),Et=document.querySelector("#project-editor"),bt=document.querySelector("#task-editor"),qt=document.querySelectorAll(".list-with-tasks"),Ct=document.querySelectorAll(".projects__list");rt.forEach(n=>{let t=n.querySelector(".new-item__task"),e=n.closest(".list"),o=e&&e.classList.contains("projects__list");t.addEventListener("click",()=>{let i=(o?Et:bt).content.cloneNode(!0),a=i.querySelector(".task-editor");if(a&&e){let l=e.querySelector(".manager-item");if(l){l.innerHTML="",l.appendChild(i),a.classList.add("task-editor--visible"),n.classList.add("new-item--disabled");let r=a.querySelector('[name="title_task"]'),_=a.querySelector('[name="discription_task"]'),k=a.querySelector(".task-editor__submit-btn"),q=document.createElement("span"),d=document.createElement("span");q.classList.add("task-editor__error"),d.classList.add("task-editor__error"),r.parentNode.appendChild(q),_.parentNode.appendChild(d),r.addEventListener("input",()=>{D(r,B,q,T.TITLE,k),M(r,_,k)}),_.addEventListener("input",()=>{D(_,Y,d,T.DISC,k),M(r,_,k)}),M(r,_,k),k.addEventListener("click",()=>{if(D(r,B,q,T.TITLE,k),D(_,Y,d,T.DISC,k),r.classList.contains("has-error")||_.classList.contains("has-error"))return;let y=r.value,p=_.value;if(o)Ct.forEach(L=>{let g=gt.content.cloneNode(!0),C=g.querySelector(".project__title"),m=g.querySelector(".project__discription");C.textContent=y,m.textContent=p,L.querySelector(".projects__list-wrapper").appendChild(g),mt(),ut()});else{let L=tt(),g=et();qt.forEach(C=>{let m=St.content.cloneNode(!0),f=m.querySelector(".task");f.dataset.id=L,f.dataset.order=g;let j=m.querySelector(".task__title"),w=m.querySelector(".task__discription"),N=m.querySelector(".task__data"),x=m.querySelector(".task__project"),v=m.querySelector(".task__circle"),A=document.querySelector(".task-editor__priority-label"),u=a.querySelector('[name="data_task"]').value,h=a.querySelector('[name="priority_task"]').value,E=a.querySelector('[name="project_task"]').value;j.textContent=y,w.textContent=p,N.textContent=u,u||(N.textContent="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"),x.textContent=E,h==="\u0421\u0440\u043E\u0447\u043D\u043E"?v.classList.add("task__circle--priority1"):h==="\u0412\u0430\u0436\u043D\u043E"?v.classList.add("task__circle--priority2"):h==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&v.classList.add("task__circle--priority3"),A.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),C.querySelector(".list-with-tasks__wrapper").appendChild(m),pt(),dt()})}a.reset(),M(r,_,k),F(),O();let S=document.querySelector(".tasks__header-button--active").textContent.trim();H(S),ct()}),o||W(nt()),V()}}let c=a.querySelector(".task-editor__close-btn");c&&c.addEventListener("click",()=>{a.classList.add("task-editor--hidden"),a.addEventListener("transitionend",function l(){a.remove(),n.classList.remove("new-item--disabled"),a.removeEventListener("transitionend",l)},{once:!0})})})});
