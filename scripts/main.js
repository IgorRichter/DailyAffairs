var B=o=>o.key==="Escape",k=o=>t=>{B(t)&&(t.preventDefault(),o())},m=document.querySelector(".sidebar");function M(){let o=new Date,t={rendered:!1,localDate:new Date,prevMonthLastDate:null,calWeekDays:["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],calMonthName:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0440\u0432\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],daysInMonth:function(e,n){return new Date(n,e,0).getDate()},firstDay:function(){return new Date(o.getFullYear(),o.getMonth(),1)},lastDay:function(){return new Date(o.getFullYear(),o.getMonth()+1,0)},firstDayNumber:function(){let e=t.firstDay().getDay();return e===0?7:e},lastDayNumber:function(){return t.lastDay().getDay()+1},getPreviousMonthLastDate:function(){return new Date(o.getFullYear(),o.getMonth(),0).getDate()},navigateToPreviousMonth:function(){o.setMonth(o.getMonth()-1),t.attachEventsOnNextPrev()},navigateToNextMonth:function(){o.setMonth(o.getMonth()+1),t.attachEventsOnNextPrev()},navigateToCurrentMonth:function(){let e=t.localDate.getMonth(),n=t.localDate.getFullYear();o.setMonth(e),o.setYear(n),t.attachEventsOnNextPrev()},displayYear:function(){let e=document.querySelector(".calendar .calendar-year-label");e.innerHTML=o.getFullYear()},displayMonth:function(){let e=document.querySelector(".calendar .calendar-month-label");e.innerHTML=t.calMonthName[o.getMonth()]},plotSelectors:function(){let e=document.querySelector(".calendar"),n=document.createElement("div");n.classList.add("calendar-inner");let a=document.createElement("div");a.classList.add("calendar-controls");let r=document.createElement("div");r.classList.add("calendar-prev");let i=document.createElement("a");i.setAttribute("href","#");let d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("xmlns","http://www.w3.org/2000/svg"),d.setAttribute("width","128"),d.setAttribute("height","128"),d.setAttribute("viewBox","0 0 128 128");let l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("fill","#666"),l.setAttribute("d","M88.2 3.8L35.8 56.23 28 64l7.8 7.78 52.4 52.4 9.78-7.76L45.58 64l52.4-52.4z"),d.appendChild(l),i.appendChild(d),r.appendChild(i);let s=document.createElement("div");s.classList.add("calendar-year-month");let w=document.createElement("div");w.classList.add("calendar-month-label");let f=document.createElement("div");f.textContent="-";let g=document.createElement("div");g.classList.add("calendar-year-label"),s.appendChild(w),s.appendChild(f),s.appendChild(g);let h=document.createElement("div");h.classList.add("calendar-next");let y=document.createElement("a");y.setAttribute("href","#");let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("xmlns","http://www.w3.org/2000/svg"),p.setAttribute("width","128"),p.setAttribute("height","128"),p.setAttribute("viewBox","0 0 128 128");let v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("fill","#666"),v.setAttribute("d","M38.8 124.2l52.4-52.42L99 64l-7.77-7.78-52.4-52.4-9.8 7.77L81.44 64 29 116.42z"),p.appendChild(v),y.appendChild(p),h.appendChild(y),a.appendChild(r),a.appendChild(s),a.appendChild(h);let b=document.createElement("div");b.classList.add("calendar-body"),n.appendChild(a),n.appendChild(b),e.appendChild(n)},plotDayNames:function(){let e=document.querySelector(".calendar .calendar-body");t.calWeekDays.forEach(n=>{let a=document.createElement("div");a.textContent=n,e.appendChild(a)})},plotDates:function(){let e=document.querySelector(".calendar .calendar-body");t.rendered||(t.plotSelectors(),t.rendered=!0),e.innerHTML="",t.plotDayNames(),t.displayMonth(),t.displayYear();let n=1,a=0;t.prevMonthLastDate=t.getPreviousMonthLastDate();let r=[],i=t.daysInMonth(o.getMonth()+1,o.getFullYear());for(let d=1;d<i;d++)if(d<t.firstDayNumber()){a+=1;let l=document.createElement("div");l.classList.add("prev-dates"),e.appendChild(l),r.push(t.prevMonthLastDate--)}else{let l=document.createElement("div");l.classList.add("number-item"),l.setAttribute("data-num",n);let s=document.createElement("a");s.classList.add("dateNumber"),s.href="#",s.textContent=n++,l.appendChild(s),e.appendChild(l)}for(let d=0;d<a+1;d++){let l=document.createElement("div");l.classList.add("number-item"),l.setAttribute("data-num",n);let s=document.createElement("a");s.classList.add("dateNumber"),s.href="#",s.textContent=n++,l.appendChild(s),e.appendChild(l)}t.highlightToday(),t.plotPrevMonthDates(r),t.plotNextMonthDates()},attachEvents:function(){let e=document.querySelector(".calendar .calendar-prev a"),n=document.querySelector(".calendar .calendar-next a"),a=document.querySelectorAll(".calendar .dateNumber");e.addEventListener("click",t.navigateToPreviousMonth),n.addEventListener("click",t.navigateToNextMonth);for(var r=0;r<a.length;r++)a[r].addEventListener("click",t.selectDate,!1)},highlightToday:function(){let e=t.localDate.getMonth()+1,n=o.getMonth()+1,a=t.localDate.getFullYear(),r=o.getFullYear();a===r&&e===n&&document.querySelectorAll(".number-item")&&document.querySelectorAll(".number-item")[o.getDate()-1].classList.add("calendar-today")},plotPrevMonthDates:function(e){e.reverse();for(let n=0;n<e.length;n++)document.querySelectorAll(".prev-dates")&&(document.querySelectorAll(".prev-dates")[n].textContent=e[n])},plotNextMonthDates:function(){let e=document.querySelector(".calendar-body").childElementCount;if(e>42){let n=49-e;t.loopThroughNextDays(n)}if(e>35&&e<=42){let n=42-e;t.loopThroughNextDays(42-e)}},loopThroughNextDays:function(e){let n=document.querySelector(".calendar-body");if(e>0)for(let a=1;a<=e;a++){let r=document.createElement("div");r.classList.add("next-dates"),r.textContent=a,n.appendChild(r)}},attachEventsOnNextPrev:function(){t.plotDates(),t.attachEvents()},init:function(){t.rendered||(t.plotSelectors(),t.rendered=!0),t.plotDates(),t.attachEvents()}};t.init()}function _(){let o=document.querySelectorAll(".editor"),t=document.getElementById("dateInput"),e=document.querySelector(".calendar"),n=document.getElementById("priorityInput"),a=document.querySelector(".task-editor__priority-label"),r=document.querySelector(".popup-priority"),i=document.querySelectorAll(".popup-priority__item"),d=document.getElementById("projectInput"),l=document.querySelector(".popup-project"),s=document.querySelectorAll(".popup-project__item"),w=new M;o.forEach(c=>{c.addEventListener("input",()=>{c.style.height="auto",c.style.height=c.scrollHeight+"px"})});function f(c,u,C){return function(T){T.stopPropagation(),c.classList.contains("task-editor__popup--open")?C():u()}}n.addEventListener("click",f(r,P,L)),d.addEventListener("click",f(l,N,E)),i.forEach(function(c){c.addEventListener("click",function(){let u=c.textContent.trim();switch(n.value=u,a.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),u){case"\u0421\u0440\u043E\u0447\u043D\u043E":a.classList.add("task-editor__priority-label--priority1");break;case"\u0412\u0430\u0436\u043D\u043E":a.classList.add("task-editor__priority-label--priority2");break;case"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":a.classList.add("task-editor__priority-label--priority3");break;default:break}L()})}),s.forEach(function(c){c.addEventListener("click",function(){let u=c.textContent.trim();d.value=u,E()})}),t.addEventListener("click",()=>{e.style.display==="block"?D():I()}),e.addEventListener("click",function(c){if(c.target.classList.contains("dateNumber")){let u=c.target.textContent.trim(),C=e.querySelector(".calendar-month-label").textContent.trim();t.value=`${u} ${C}`,D()}});let g=k(L),h=k(E),y=k(D);function p(){D(),L(),E()}function v(c,u){p(),c.classList.add("task-editor__popup--open"),document.addEventListener("keydown",u)}function b(c,u){c.classList.remove("task-editor__popup--open"),document.removeEventListener("keydown",u)}function P(){v(r,g)}function L(){b(r,g)}function N(){v(l,h)}function E(){b(l,h)}function I(){p(),e.style.display="block",document.addEventListener("keydown",y)}function D(){e.style.display="none",document.removeEventListener("keydown",y)}document.addEventListener("click",function(c){!r.contains(c.target)&&c.target!==n&&L(),!l.contains(c.target)&&c.target!==d&&E(),!e.contains(c.target)&&c.target!==t&&D()})}var Y=document.querySelectorAll(".new-item"),j=document.querySelector("#task-editor");Y.forEach(o=>{o.querySelector(".new-item__task").addEventListener("click",()=>{let e=j.content.cloneNode(!0),n=e.querySelector(".task-editor");if(n){let r=o.closest(".list");if(r){let i=r.querySelector(".manager-item");i&&(i.innerHTML="",i.appendChild(e),n.classList.add("task-editor--visible"),o.classList.add("new-item--disabled"),_())}}let a=n.querySelector(".task-editor__close-btn");a&&a.addEventListener("click",()=>{n.classList.add("task-editor--hidden"),n.addEventListener("transitionend",function(){n.remove(),o.classList.remove("new-item--disabled")},{once:!0})})})});var F=document.querySelectorAll(".nav__item a"),H=document.querySelectorAll(".nav__link"),O=document.querySelector(".app-header__title"),q=document.querySelector(".task-editor");F.forEach(o=>{o.addEventListener("click",t=>{t.preventDefault(),q&&q.remove(),H.forEach(d=>{d.classList.remove("nav__link--active")}),o.classList.add("nav__link--active"),m.classList.remove("sidebar--open");let e=o.textContent;O.textContent=e;let n=o.getAttribute("data-section"),a=document.querySelectorAll(".section");for(var r=0;r<a.length;r++)a[r].style.display="none";let i=document.getElementById(n);i&&(i.style.display="block")})});var x=document.querySelector(".sidebar__button"),S=document.querySelector(".dropdown-menu"),K=document.querySelector(".dropdown-menu__item--arrow"),z=document.querySelector(".dropdown-menu__submenu"),A=document.querySelector(".sidebar__user-button");x.addEventListener("click",()=>{m.classList.toggle("sidebar--open"),document.body.style.overflow=m.classList.contains("sidebar--open")?"hidden":"auto"});A.addEventListener("click",()=>{S.classList.toggle("dropdown-menu--open")});K.addEventListener("click",()=>{z.classList.toggle("dropdown-menu__submenu--open")});document.addEventListener("click",o=>{!m.contains(o.target)&&!x.contains(o.target)&&(m.classList.remove("sidebar--open"),document.body.style.overflow=m.classList.contains("sidebar--open")?"hidden":"auto"),!S.contains(o.target)&&!A.contains(o.target)&&S.classList.remove("dropdown-menu--open")});
