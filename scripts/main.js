var N=document.querySelector(".sidebar"),H=document.querySelectorAll(".new-item"),O=100,$=500,w={TITLE:"\u0414\u043B\u0438\u043D\u0430 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 100 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",DISC:"\u0414\u043B\u0438\u043D\u0430 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 500 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."};var dt=document.querySelector(".sidebar__button"),Q=document.querySelector(".dropdown-menu"),At=document.querySelector(".dropdown-menu__item--arrow"),It=document.querySelector(".dropdown-menu__submenu"),ut=document.querySelector(".sidebar__user-button");dt.addEventListener("click",()=>{N.classList.toggle("sidebar--open"),document.body.style.overflow=N.classList.contains("sidebar--open")?"hidden":"auto"});ut.addEventListener("click",()=>{Q.classList.toggle("dropdown-menu--open")});At.addEventListener("click",()=>{It.classList.toggle("dropdown-menu__submenu--open")});document.addEventListener("click",t=>{!N.contains(t.target)&&!dt.contains(t.target)&&(N.classList.remove("sidebar--open"),document.body.style.overflow=N.classList.contains("sidebar--open")?"hidden":"auto"),!Q.contains(t.target)&&!ut.contains(t.target)&&Q.classList.remove("dropdown-menu--open")});var ot=document.querySelector(".button-date"),Z=ot.querySelector(".button-date__title"),tt=ot.querySelector(".button-date__arrow--left"),et=ot.querySelector(".button-date__arrow--right"),Mt=document.querySelector(".dashboard .list-with-tasks__wrapper"),E=new Date;rt();I();et.addEventListener("click",function(){et.classList.contains("button-date__arrow--disabled")||(E.setDate(E.getDate()+1),rt(),I())});tt.addEventListener("click",function(){tt.classList.contains("button-date__arrow--disabled")||(E.setDate(E.getDate()-1),rt(),I())});function rt(){let t=new Date,e=new Date(t);e.setDate(e.getDate()+1),U(E,t)?Z.textContent="\u0421\u0435\u0433\u043E\u0434\u043D\u044F":U(E,e)?Z.textContent="\u0417\u0430\u0432\u0442\u0440\u0430":Z.textContent=Bt(E),Pt()}function Pt(){let t=new Date,e="button-date__arrow--disabled";tt.classList.toggle(e,U(E,t)),et.classList.toggle(e,Nt(E,t))}function I(){let t=Mt.querySelectorAll(".task"),e=/(\d+)\s+(\S+)/;t.forEach(o=>{let r=o.querySelector(".task__data").textContent;if(r.trim()==="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"){o.classList.add("task--hidden");return}if(o.classList.contains("task--completed")){o.classList.add("task--hidden");return}let[,s,a]=r.match(e),c=new Date(E.getFullYear(),nt(a),parseInt(s));U(E,c)?o.classList.remove("task--hidden"):o.classList.add("task--hidden")})}function Bt(t){let e={weekday:"long",month:"long",day:"numeric"};return t.toLocaleDateString("ru-RU",e)}function U(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function Nt(t,e){let o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+7);return t>=o}function nt(t){return["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"].indexOf(t)}var pt=document.querySelectorAll(".tasks__header-button"),mt=document.querySelector(".tasks .list-with-tasks__wrapper");pt.forEach(t=>{t.addEventListener("click",function(){pt.forEach(e=>e.classList.remove("tasks__header-button--active")),t.classList.add("tasks__header-button--active"),F(t.textContent.trim())})});function F(t){mt.querySelectorAll(".task").forEach(o=>{t==="\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044B\u0435"?o.classList.contains("task--completed")?o.classList.remove("task--hidden"):o.classList.add("task--hidden"):t==="\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435"?o.classList.contains("task--completed")||o.classList.contains("task--expired")?o.classList.add("task--hidden"):o.classList.remove("task--hidden"):t==="\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043D\u044B\u0435"&&(o.classList.contains("task--expired")?o.classList.remove("task--hidden"):o.classList.add("task--hidden"))})}function Ft(t){let e=t.querySelector(".task__title"),o=t.dataset.id;t.classList.add("task--completed");let r=document.createElement("s");r.textContent=e.textContent,e.textContent="",e.appendChild(r),t.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#arrow-back"),t.style.transition="opacity 0.3s ease",t.style.opacity="0",setTimeout(()=>{t.classList.add("task--completed","task--hidden"),t.style.transition="",t.style.opacity=""},300),document.querySelectorAll('.list-with-tasks__wrapper .task[data-id="'+o+'"]').forEach(c=>{c.classList.add("task--completed");let i=c.querySelector(".task__title");if(!i.querySelector("s")){let n=document.createElement("s");n.textContent=i.textContent,i.textContent="",i.appendChild(n)}if(c.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#arrow-back"),c.classList.contains("task--expired")){c.classList.remove("task--expired");let n=c.querySelector(".task__info-expired");n&&n.remove()}})}function yt(){document.querySelectorAll(".button-complete-task").forEach(e=>{e.addEventListener("click",function(o){let r=o.target.closest(".task");r.classList.contains("task--completed")?Yt(r):Ft(r)})})}function Yt(t){let e=t.querySelector(".task__title s");e&&(e.parentNode.textContent=e.textContent),t.classList.remove("task--completed"),t.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#checkmark");let r=t.dataset.id;document.querySelectorAll('.list-with-tasks__wrapper .task[data-id="'+r+'"]').forEach(c=>{let i=c.querySelector(".task__title s");i&&(i.parentNode.textContent=i.textContent),c.classList.remove("task--completed"),c.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#checkmark")});let a=document.querySelector(".tasks__header-button--active");if(a){let c=a.textContent.trim();F(c)}V()}function V(){let t=mt.querySelectorAll(".task"),e=new Date;e.setHours(0,0,0,0),t.forEach(o=>{let r=o.querySelector(".task__data").textContent.trim();if(r==="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"){o.classList.add("task--hidden");return}let[,s,a]=r.match(/(\d+)\s+(\S+)/);if(new Date(e.getFullYear(),nt(a),parseInt(s)).getTime()<e.getTime()){o.classList.add("task--expired");let i=o.querySelector(".task__info-wrapper");if(!i.querySelector(".task__info-expired")){let n=document.createElement("span");n.classList.add("task__info-expired"),n.textContent="\u0417\u0430\u0434\u0430\u0447\u0430 \u043F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u0430",i.insertBefore(n,i.firstChild)}let l=document.querySelector(".tasks__header-button--active");l&&l.textContent!=="\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043D\u044B\u0435"&&o.classList.add("task--hidden")}else{o.classList.remove("task--expired");let i=o.querySelector(".task__info-expired");i&&i.remove()}})}var Ht=document.querySelectorAll(".nav__item a"),Ot=document.querySelectorAll(".nav__link"),$t=document.querySelector(".app-header__title"),Vt=document.querySelectorAll(".manager-item");Ht.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),Vt.forEach(u=>{u.innerHTML=""}),document.querySelectorAll(".tasks__header-button").forEach(u=>{u.classList.remove("tasks__header-button--active"),u.textContent.trim()==="\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435"&&u.classList.add("tasks__header-button--active");let h=document.querySelector(".tasks__header-button--active").textContent.trim();F(h)}),I();let r=document.querySelectorAll(".task"),s=document.querySelectorAll(".project");r.forEach(u=>{u.classList.remove("task--edit")}),s.forEach(u=>{u.classList.remove("project--edit")}),H.forEach(u=>{u.classList.remove("new-item--disabled")}),Ot.forEach(u=>{u.classList.remove("nav__link--active")}),t.classList.add("nav__link--active"),N.classList.remove("sidebar--open");let a=t.textContent;$t.textContent=a;let c=t.getAttribute("data-section"),i=document.querySelectorAll(".section");for(var l=0;l<i.length;l++)i[l].style.display="none";let n=document.getElementById(c);n&&(n.style.display="block")})});var Wt=t=>t.key==="Escape",G=t=>e=>{Wt(e)&&(e.preventDefault(),t())};function _t(){return Math.random().toString(36).substr(2,9)}var kt=function(){let t=0;return function(){return t++,t}}(),ht=()=>{let t=new Date,e=t.getDate(),o=["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],r=t.getMonth(),s=o[r];return`${e} ${s}`};function j(t,e,o,r,s){t.value.trim().length>e?(o.textContent=r,t.classList.add("has-error"),s.disabled=!0):(o.textContent="",t.classList.remove("has-error"),s.disabled=!1)}function M(t,e,o){let r=t.value.trim()!=="",s=!t.classList.contains("has-error"),a=!e.classList.contains("has-error");o.disabled=!r||!s||!a}function st(t){let e=t.trim().split(" "),o=parseInt(e[0]),r=Ut(e[1]),s=new Date().getFullYear();return new Date(s,r,o)}function Ut(t){return{\u042F\u043D\u0432\u0430\u0440\u044C:0,\u0424\u0435\u0432\u0440\u0430\u043B\u044C:1,\u041C\u0430\u0440\u0442:2,\u0410\u043F\u0440\u0435\u043B\u044C:3,\u041C\u0430\u0439:4,\u0418\u044E\u043D\u044C:5,\u0418\u044E\u043B\u044C:6,\u0410\u0432\u0433\u0443\u0441\u0442:7,\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C:8,\u041E\u043A\u0442\u044F\u0431\u0440\u044C:9,\u041D\u043E\u044F\u0431\u0440\u044C:10,\u0414\u0435\u043A\u0430\u0431\u0440\u044C:11}[t]}function ft(){let t=new Date,e={rendered:!1,localDate:new Date,prevMonthLastDate:null,calWeekDays:["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],calMonthName:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0440\u0432\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],daysInMonth:function(o,r){return new Date(r,o,0).getDate()},firstDay:function(){return new Date(t.getFullYear(),t.getMonth(),1)},lastDay:function(){return new Date(t.getFullYear(),t.getMonth()+1,0)},firstDayNumber:function(){let o=e.firstDay().getDay();return o===0?7:o},lastDayNumber:function(){return e.lastDay().getDay()+1},getPreviousMonthLastDate:function(){return new Date(t.getFullYear(),t.getMonth(),0).getDate()},navigateToPreviousMonth:function(){t.setMonth(t.getMonth()-1),e.attachEventsOnNextPrev()},navigateToNextMonth:function(){t.setMonth(t.getMonth()+1),e.attachEventsOnNextPrev()},navigateToCurrentMonth:function(){let o=e.localDate.getMonth(),r=e.localDate.getFullYear();t.setMonth(o),t.setYear(r),e.attachEventsOnNextPrev()},displayYear:function(){let o=document.querySelector(".calendar .calendar-year-label");o.innerHTML=t.getFullYear()},displayMonth:function(){let o=document.querySelector(".calendar .calendar-month-label");o.innerHTML=e.calMonthName[t.getMonth()]},plotSelectors:function(){let o=document.querySelector(".calendar"),r=document.createElement("div");r.classList.add("calendar-inner");let s=document.createElement("div");s.classList.add("calendar-controls");let a=document.createElement("div");a.classList.add("calendar-prev");let c=document.createElement("a");c.setAttribute("href","#");let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("width","128"),i.setAttribute("height","128"),i.setAttribute("viewBox","0 0 128 128");let l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("fill","#666"),l.setAttribute("d","M88.2 3.8L35.8 56.23 28 64l7.8 7.78 52.4 52.4 9.78-7.76L45.58 64l52.4-52.4z"),i.appendChild(l),c.appendChild(i),a.appendChild(c);let n=document.createElement("div");n.classList.add("calendar-year-month");let u=document.createElement("div");u.classList.add("calendar-month-label");let h=document.createElement("div");h.textContent="-";let C=document.createElement("div");C.classList.add("calendar-year-label"),n.appendChild(u),n.appendChild(h),n.appendChild(C);let p=document.createElement("div");p.classList.add("calendar-next");let k=document.createElement("a");k.setAttribute("href","#");let y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttribute("xmlns","http://www.w3.org/2000/svg"),y.setAttribute("width","128"),y.setAttribute("height","128"),y.setAttribute("viewBox","0 0 128 128");let q=document.createElementNS("http://www.w3.org/2000/svg","path");q.setAttribute("fill","#666"),q.setAttribute("d","M38.8 124.2l52.4-52.42L99 64l-7.77-7.78-52.4-52.4-9.8 7.77L81.44 64 29 116.42z"),y.appendChild(q),k.appendChild(y),p.appendChild(k),s.appendChild(a),s.appendChild(n),s.appendChild(p);let L=document.createElement("div");L.classList.add("calendar-body"),r.appendChild(s),r.appendChild(L),o.appendChild(r)},plotDayNames:function(){let o=document.querySelector(".calendar .calendar-body");e.calWeekDays.forEach(r=>{let s=document.createElement("div");s.textContent=r,o.appendChild(s)})},plotDates:function(){let o=document.querySelector(".calendar .calendar-body");e.rendered||(e.plotSelectors(),e.rendered=!0),o.innerHTML="",e.plotDayNames(),e.displayMonth(),e.displayYear();let r=1,s=0;e.prevMonthLastDate=e.getPreviousMonthLastDate();let a=[],c=e.daysInMonth(t.getMonth()+1,t.getFullYear());for(let i=1;i<c;i++)if(i<e.firstDayNumber()){s+=1;let l=document.createElement("div");l.classList.add("prev-dates"),o.appendChild(l),a.push(e.prevMonthLastDate--)}else{let l=document.createElement("div");l.classList.add("number-item"),l.setAttribute("data-num",r);let n=document.createElement("a");n.classList.add("dateNumber"),n.href="#",n.textContent=r++,l.appendChild(n),o.appendChild(l)}for(let i=0;i<s+1;i++){let l=document.createElement("div");l.classList.add("number-item"),l.setAttribute("data-num",r);let n=document.createElement("a");n.classList.add("dateNumber"),n.href="#",n.textContent=r++,l.appendChild(n),o.appendChild(l)}e.highlightToday(),e.plotPrevMonthDates(a),e.plotNextMonthDates()},attachEvents:function(){let o=document.querySelector(".calendar .calendar-prev a"),r=document.querySelector(".calendar .calendar-next a"),s=document.querySelectorAll(".calendar .dateNumber");o.addEventListener("click",e.navigateToPreviousMonth),r.addEventListener("click",e.navigateToNextMonth);for(var a=0;a<s.length;a++)s[a].addEventListener("click",e.selectDate,!1)},highlightToday:function(){let o=e.localDate.getMonth()+1,r=t.getMonth()+1,s=e.localDate.getFullYear(),a=t.getFullYear();s===a&&o===r&&document.querySelectorAll(".number-item")&&document.querySelectorAll(".number-item")[t.getDate()-1].classList.add("calendar-today")},plotPrevMonthDates:function(o){o.reverse();for(let r=0;r<o.length;r++)document.querySelectorAll(".prev-dates")&&(document.querySelectorAll(".prev-dates")[r].textContent=o[r])},plotNextMonthDates:function(){let o=document.querySelector(".calendar-body").childElementCount;if(o>42){let r=49-o;e.loopThroughNextDays(r)}if(o>35&&o<=42){let r=42-o;e.loopThroughNextDays(42-o)}},loopThroughNextDays:function(o){let r=document.querySelector(".calendar-body");if(o>0)for(let s=1;s<=o;s++){let a=document.createElement("div");a.classList.add("next-dates"),a.textContent=s,r.appendChild(a)}},attachEventsOnNextPrev:function(){e.plotDates(),e.attachEvents()},init:function(){e.rendered||(e.plotSelectors(),e.rendered=!0),e.plotDates(),e.attachEvents()}};e.init()}function X(){document.querySelectorAll(".editor").forEach(e=>{e.addEventListener("input",()=>{e.style.height="auto",e.style.height=e.scrollHeight+"px"})})}function K(t){let e=document.getElementById("dateInput"),o=document.querySelector(".calendar"),r=document.getElementById("priorityInput"),s=document.querySelector(".popup-priority"),a=document.querySelectorAll(".popup-priority__item"),c=document.querySelector(".task-editor__priority-label"),i=document.getElementById("projectInput"),l=document.querySelector(".popup-project"),n=document.querySelector(".popup-project__list"),u=document.querySelector(".popup-project_btn-reset"),h=document.querySelector(".popup-project__list-empty"),C=new ft;function p(d,m,v){return function(D){D.stopPropagation(),d.classList.contains("task-editor__popup--open")?v():m()}}if(r.addEventListener("click",p(s,_,f)),!i.closest(".list-in-project"))i.addEventListener("click",p(l,A,b));else{let d=document.querySelector(".projects-task").dataset.project;i.value=d}u.addEventListener("click",()=>{i.value="";let m=document.querySelector(".task-editor").dataset.taskId,v=document.querySelector(`.task[data-id="${m}"]`);v&&delete v.dataset.project,b()}),a.forEach(function(d){d.addEventListener("click",function(){let m=d.textContent.trim();switch(r.value=m,c.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),m){case"\u0421\u0440\u043E\u0447\u043D\u043E":c.classList.add("task-editor__priority-label--priority1");break;case"\u0412\u0430\u0436\u043D\u043E":c.classList.add("task-editor__priority-label--priority2");break;case"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":c.classList.add("task-editor__priority-label--priority3");break;default:break}f()})}),e.value=t,e.addEventListener("click",()=>{o.style.display==="block"?T():Y()}),o.addEventListener("click",function(d){if(d.target.classList.contains("dateNumber")){let m=d.target.textContent.trim(),v=o.querySelector(".calendar-month-label").textContent.trim();e.value=`${m} ${v}`,T()}});let k=G(f),y=G(b),q=G(T);function L(){T(),f(),b()}function g(d,m){L(),d.classList.add("task-editor__popup--open"),document.addEventListener("keydown",m)}function x(d,m){d.classList.remove("task-editor__popup--open"),document.removeEventListener("keydown",m)}function _(){g(s,k)}function f(){x(s,k)}function A(){g(l,y),S()}function b(){x(l,y)}function Y(){L(),o.style.display="block",document.addEventListener("keydown",q)}function T(){o.style.display="none",document.removeEventListener("keydown",q)}function S(){let m=document.querySelector(".projects__list-wrapper").querySelectorAll(".project__title");n.innerHTML="",m.forEach(v=>{let D=document.createElement("li");D.classList.add("popup-project__item");let J=document.createElement("span");J.textContent=v.textContent.trim(),D.appendChild(J),n.appendChild(D),D.addEventListener("click",function(){let B=D.textContent.trim();i.value=B,b()})}),P()}function P(){document.querySelectorAll(".popup-project__list li").length===0?h.style.display="block":h.style.display="none"}document.addEventListener("click",function(d){!s.contains(d.target)&&d.target!==r&&f(),!l.contains(d.target)&&d.target!==i&&b(),!o.contains(d.target)&&d.target!==e&&T()})}function vt(t,e,o=null){document.querySelectorAll(t).forEach(s=>{s.addEventListener("click",()=>{let a=s.closest(e);if(a)if(o){let c=a.dataset.id;document.querySelectorAll(`${e}[${o}="${c}"]`).forEach(l=>{l.remove()})}else a.remove()})})}function Lt(t,e,o,r,s,a){let c=document.querySelectorAll(t),i=document.querySelector(o);c.forEach(l=>{l.addEventListener("click",()=>{let n=l.closest(e);if(n.classList.add(`${e.slice(1)}--edit`),n){let u=n.dataset.id,h=n.querySelector(r).textContent.trim(),C=n.querySelector(s).textContent.trim(),p=i.content.cloneNode(!0).querySelector(".task-editor"),k=p.querySelector('[name="title_task"]'),y=p.querySelector('[name="discription_task"]'),q=p.querySelector('[name="data_task"]'),L=p.querySelector('[name="priority_task"]'),g=p.querySelector('[name="project_task"]'),x=p.querySelector(".task-editor__priority-label"),_=p.querySelector(".task-editor__submit-btn"),f=document.createElement("span"),A=document.createElement("span");k.value=h,y.value=C,f.classList.add("task-editor__error"),A.classList.add("task-editor__error"),k.parentNode.appendChild(f),y.parentNode.appendChild(A),k.addEventListener("input",()=>{j(k,O,f,w.TITLE,_),M(k,y,_)}),y.addEventListener("input",()=>{j(y,$,A,w.DISC,_),M(k,y,_)}),M(k,y,_),_.querySelector("use").setAttribute("href","icons/stack.svg#checkmark"),_.addEventListener("click",()=>{if(j(k,O,f,w.TITLE,_),j(y,$,A,w.DISC,_),k.classList.contains("has-error")||y.classList.contains("has-error"))return;let S=k.value.trim(),P=y.value.trim();if(n.querySelector(r).textContent=S,n.querySelector(s).textContent=P,a){let m=q.value.trim(),v=L.value.trim(),D=g.value.trim();document.querySelectorAll(`.task[data-id="${u}"]`).forEach(B=>{B.querySelector(".task__title").textContent=S,B.querySelector(".task__discription").textContent=P,B.querySelector(".task__data").textContent=m,B.querySelector(".task__project").textContent=D,B.dataset.project=D;let W=B.querySelector(".task__circle");W.classList.remove("task__circle--priority1","task__circle--priority2","task__circle--priority3"),v==="\u0421\u0440\u043E\u0447\u043D\u043E"?W.classList.add("task__circle--priority1"):v==="\u0412\u0430\u0436\u043D\u043E"?W.classList.add("task__circle--priority2"):v==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&W.classList.add("task__circle--priority3")})}p.classList.add("task-editor--hidden"),p.addEventListener("transitionend",function m(){n.classList.remove(`${e.slice(1)}--edit`),p.remove(),p.removeEventListener("transitionend",m)},{once:!0}),I(),V();let d=document.querySelector(".tasks__header-button--active");if(d){let m=d.textContent.trim();F(m)}});let Y=n.closest(".list, .projects__list").querySelector(".manager-item");Y.innerHTML="",Y.appendChild(p),p.classList.add("task-editor--visible");let T=p.querySelector(".task-editor__close-btn");if(T&&T.addEventListener("click",()=>{p.classList.add("task-editor--hidden"),p.addEventListener("transitionend",function S(){n.classList.remove(`${e.slice(1)}--edit`),p.remove(),p.removeEventListener("transitionend",S)},{once:!0})}),a){let S=n.querySelector(".task__data").textContent.trim(),P=n.querySelector(".task__project").textContent.trim(),d=n.querySelector(".task__circle").classList.contains("task__circle--priority1")?"\u0421\u0440\u043E\u0447\u043D\u043E":n.querySelector(".task__circle").classList.contains("task__circle--priority2")?"\u0412\u0430\u0436\u043D\u043E":n.querySelector(".task__circle").classList.contains("task__circle--priority3")?"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":"";q.value=S,g.value=P,L.value=d,d==="\u0421\u0440\u043E\u0447\u043D\u043E"?x.classList.add("task-editor__priority-label--priority1"):d==="\u0412\u0430\u0436\u043D\u043E"?x.classList.add("task-editor__priority-label--priority2"):d==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&x.classList.add("task-editor__priority-label--priority3"),K(S)}X()}})})}function St(){vt(".button-delete-task",".task","data-id")}function qt(){vt(".button-delete-project",".project")}function gt(){Lt(".button-edit-task",".task","#task-editor",".task__title",".task__discription",!0)}function bt(){Lt(".button-edit-project",".project","#project-editor",".project__title",".project__discription",!1)}function Et(t){let e=document.querySelector(".projects"),o=document.querySelector(".projects-task"),r=document.querySelector(".app-header__title"),s=t.target.closest(".project").querySelector(".project__title").textContent,a=document.querySelectorAll(".list-with-tasks__wrapper .task");Gt(),document.querySelectorAll(`.list-with-tasks__wrapper .task[data-project="${s}"]`).forEach(n=>{n.classList.remove("task--hidden")}),a.forEach(n=>{(n.classList.contains("task--expired")||n.classList.contains("task--completed"))&&n.classList.add("task--hidden")}),e.style.display="none",o.style.display="block",o.dataset.project=s;let i="\u041F\u0440\u043E\u0435\u043A\u0442\u044B / "+s.slice(0,20)+(s.length>17?"...":"");r.textContent=i,document.querySelector(".button-back").classList.remove("tasks__header-button--active")}function Ct(){let t=document.querySelector(".projects"),e=document.querySelector(".projects-task"),o=document.querySelector(".app-header__title"),r=document.querySelectorAll(".project__title");document.querySelectorAll(".manager-item").forEach(c=>{c.innerHTML=""}),H.forEach(c=>{c.classList.remove("new-item--disabled")}),e.style.display="none",t.style.display="block";let a=o.textContent;r.forEach((c,i)=>{let l=c.textContent,n=l.slice(0,20)+(l.length>17?"...":"");i===0?(a=a.replace("/ "+l,""),a=a.replace("/ "+n,"")):a.includes(" / "+l)&&(a=a.replace(" / "+l,""),a=a.replace(" / "+n,""))}),o.textContent=a}function Gt(){let t=event.target.closest(".project").querySelector(".project__title").textContent;document.querySelectorAll(".list-with-tasks__wrapper .task").forEach(r=>{r.classList.add("task--hidden")}),document.querySelectorAll(`.list-with-tasks__wrapper .task[data-project="${t}"]`).forEach(r=>{r.classList.remove("task--hidden")})}var Xt=document.querySelector("#task"),Kt=document.querySelector("#project"),zt=document.querySelector("#project-editor"),Rt=document.querySelector("#task-editor"),Jt=document.querySelectorAll(".list-with-tasks"),Qt=document.querySelectorAll(".projects__list");H.forEach(t=>{let e=t.querySelector(".new-item__task"),o=t.closest(".list"),r=o&&o.classList.contains("projects__list");e.addEventListener("click",()=>{let a=(r?zt:Rt).content.cloneNode(!0),c=a.querySelector(".task-editor");if(c&&o){let l=o.querySelector(".manager-item");if(l){l.innerHTML="",l.appendChild(a),c.classList.add("task-editor--visible"),t.classList.add("new-item--disabled");let n=c.querySelector('[name="title_task"]'),u=c.querySelector('[name="discription_task"]'),h=c.querySelector(".task-editor__submit-btn"),C=document.createElement("span"),p=document.createElement("span");C.classList.add("task-editor__error"),p.classList.add("task-editor__error"),n.parentNode.appendChild(C),u.parentNode.appendChild(p),n.addEventListener("input",()=>{j(n,O,C,w.TITLE,h),M(n,u,h)}),u.addEventListener("input",()=>{j(u,$,p,w.DISC,h),M(n,u,h)}),M(n,u,h),h.addEventListener("click",()=>{if(j(n,O,C,w.TITLE,h),j(u,$,p,w.DISC,h),n.classList.contains("has-error")||u.classList.contains("has-error"))return;let k=n.value,y=u.value;if(r)Qt.forEach(L=>{let g=Kt.content.cloneNode(!0),x=g.querySelector(".project__title"),_=g.querySelector(".project__discription");x.textContent=k,_.textContent=y,L.querySelector(".projects__list-wrapper").appendChild(g),document.querySelectorAll(".project__info-wrapper").forEach(b=>{b.addEventListener("click",Et)}),document.querySelector(".button-back").addEventListener("click",Ct),bt(),qt()});else{let L=_t(),g=kt();Jt.forEach(x=>{let _=Xt.content.cloneNode(!0),f=_.querySelector(".task");f.dataset.id=L,f.dataset.order=g;let A=_.querySelector(".task__title"),b=_.querySelector(".task__discription"),Y=_.querySelector(".task__data"),T=_.querySelector(".task__project"),S=_.querySelector(".task__circle"),P=document.querySelector(".task-editor__priority-label"),d=c.querySelector('[name="data_task"]').value,m=c.querySelector('[name="priority_task"]').value,v=c.querySelector('[name="project_task"]').value;A.textContent=k,b.textContent=y,Y.textContent=d,d||(Y.textContent="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"),T.textContent=v,f.dataset.project=v,m==="\u0421\u0440\u043E\u0447\u043D\u043E"?S.classList.add("task__circle--priority1"):m==="\u0412\u0430\u0436\u043D\u043E"?S.classList.add("task__circle--priority2"):m==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&S.classList.add("task__circle--priority3"),P.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),x.querySelector(".list-with-tasks__wrapper").appendChild(_),gt(),St()})}c.reset(),M(n,u,h),I(),V();let q=document.querySelector(".tasks__header-button--active");if(q){let L=q.textContent.trim();F(L)}yt()}),r||K(ht()),X()}}let i=c.querySelector(".task-editor__close-btn");i&&i.addEventListener("click",()=>{c.classList.add("task-editor--hidden"),c.addEventListener("transitionend",function l(){c.remove(),t.classList.remove("new-item--disabled"),c.removeEventListener("transitionend",l)},{once:!0})})})});var at=document.querySelector(".dashboard .list-with-tasks__wrapper"),z=document.querySelector(".tasks .list-with-tasks__wrapper"),R=document.querySelector(".projects-task .list-with-tasks__wrapper"),xt=document.querySelector(".dashboard__select-control");xt.addEventListener("change",function(){let t=xt.value;t==="priority"?ct(at):t==="name"?it(at):lt(at)});var Tt=document.querySelector(".tasks__select-control");Tt.addEventListener("change",function(){let t=Tt.value;t==="priority"?ct(z):t==="name"?it(z):t==="date"?jt(z):lt(z)});var Dt=document.querySelector(".projects-task-control");Dt.addEventListener("change",function(){let t=Dt.value;t==="priority"?ct(R):t==="name"?it(R):t==="date"?jt(R):lt(R)});function ct(t){let e=Array.from(t.querySelectorAll("li"));e.sort((o,r)=>{let s=wt(o.querySelector(".task__circle")),a=wt(r.querySelector(".task__circle"));return s-a}),e.forEach(o=>t.appendChild(o))}function it(t){let e=Array.from(t.querySelectorAll("li"));e.sort((o,r)=>{let s=o.querySelector(".task__title").textContent.toLowerCase(),a=r.querySelector(".task__title").textContent.toLowerCase();return s.localeCompare(a)}),e.forEach(o=>t.appendChild(o))}function lt(t){let e=Array.from(t.querySelectorAll("li"));e.sort((o,r)=>{let s=parseInt(o.dataset.order),a=parseInt(r.dataset.order);return s-a}),e.forEach(o=>t.appendChild(o))}function jt(t){let e=Array.from(t.querySelectorAll("li"));e.sort((o,r)=>{let s=st(o.querySelector(".task__data").textContent),a=st(r.querySelector(".task__data").textContent);return s-a}),e.forEach(o=>t.appendChild(o))}function wt(t){let e={"task__circle--priority1":1,"task__circle--priority2":2,"task__circle--priority3":3,task__circle:4},o=Array.from(t.classList).find(r=>r.startsWith("task__circle--priority"));return o?e[o]:e.task__circle}
