var P=document.querySelector(".sidebar"),W=document.querySelectorAll(".new-item"),H=100,O=500,D={TITLE:"\u0414\u043B\u0438\u043D\u0430 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 100 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",DISC:"\u0414\u043B\u0438\u043D\u0430 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 500 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."};var at=document.querySelector(".sidebar__button"),J=document.querySelector(".dropdown-menu"),xt=document.querySelector(".dropdown-menu__item--arrow"),Dt=document.querySelector(".dropdown-menu__submenu"),ct=document.querySelector(".sidebar__user-button");at.addEventListener("click",()=>{P.classList.toggle("sidebar--open"),document.body.style.overflow=P.classList.contains("sidebar--open")?"hidden":"auto"});ct.addEventListener("click",()=>{J.classList.toggle("dropdown-menu--open")});xt.addEventListener("click",()=>{Dt.classList.toggle("dropdown-menu__submenu--open")});document.addEventListener("click",t=>{!P.contains(t.target)&&!at.contains(t.target)&&(P.classList.remove("sidebar--open"),document.body.style.overflow=P.classList.contains("sidebar--open")?"hidden":"auto"),!J.contains(t.target)&&!ct.contains(t.target)&&J.classList.remove("dropdown-menu--open")});var et=document.querySelector(".button-date"),Q=et.querySelector(".button-date__title"),Z=et.querySelector(".button-date__arrow--left"),tt=et.querySelector(".button-date__arrow--right"),wt=document.querySelector(".dashboard .list-with-tasks__wrapper"),q=new Date;ot();I();tt.addEventListener("click",function(){tt.classList.contains("button-date__arrow--disabled")||(q.setDate(q.getDate()+1),ot(),I())});Z.addEventListener("click",function(){Z.classList.contains("button-date__arrow--disabled")||(q.setDate(q.getDate()-1),ot(),I())});function ot(){let t=new Date,e=new Date(t);e.setDate(e.getDate()+1),U(q,t)?Q.textContent="\u0421\u0435\u0433\u043E\u0434\u043D\u044F":U(q,e)?Q.textContent="\u0417\u0430\u0432\u0442\u0440\u0430":Q.textContent=At(q),Tt()}function Tt(){let t=new Date,e="button-date__arrow--disabled";Z.classList.toggle(e,U(q,t)),tt.classList.toggle(e,It(q,t))}function I(){let t=wt.querySelectorAll(".task"),e=/(\d+)\s+(\S+)/;t.forEach(o=>{let r=o.querySelector(".task__data").textContent;if(r.trim()==="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"){o.classList.add("task--hidden");return}if(o.classList.contains("task--completed")){o.classList.add("task--hidden");return}let[,n,a]=r.match(e),c=new Date(q.getFullYear(),rt(a),parseInt(n));U(q,c)?o.classList.remove("task--hidden"):o.classList.add("task--hidden")})}function At(t){let e={weekday:"long",month:"long",day:"numeric"};return t.toLocaleDateString("ru-RU",e)}function U(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function It(t,e){let o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+7);return t>=o}function rt(t){return["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"].indexOf(t)}var it=document.querySelectorAll(".tasks__header-button"),lt=document.querySelector(".tasks .list-with-tasks__wrapper");it.forEach(t=>{t.addEventListener("click",function(){it.forEach(e=>e.classList.remove("tasks__header-button--active")),t.classList.add("tasks__header-button--active"),B(t.textContent.trim())})});function B(t){lt.querySelectorAll(".task").forEach(o=>{t==="\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044B\u0435"?o.classList.contains("task--completed")?o.classList.remove("task--hidden"):o.classList.add("task--hidden"):t==="\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435"?o.classList.contains("task--completed")||o.classList.contains("task--expired")?o.classList.add("task--hidden"):o.classList.remove("task--hidden"):t==="\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043D\u044B\u0435"&&(o.classList.contains("task--expired")?o.classList.remove("task--hidden"):o.classList.add("task--hidden"))})}function Mt(t){let e=t.querySelector(".task__title"),o=t.dataset.id;t.classList.add("task--completed");let r=document.createElement("s");r.textContent=e.textContent,e.textContent="",e.appendChild(r),t.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#arrow-back"),t.style.transition="opacity 0.3s ease",t.style.opacity="0",setTimeout(()=>{t.classList.add("task--completed","task--hidden"),t.style.transition="",t.style.opacity=""},300),document.querySelectorAll('.list-with-tasks__wrapper .task[data-id="'+o+'"]').forEach(c=>{c.classList.add("task--completed");let i=c.querySelector(".task__title");if(!i.querySelector("s")){let s=document.createElement("s");s.textContent=i.textContent,i.textContent="",i.appendChild(s)}if(c.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#arrow-back"),c.classList.contains("task--expired")){c.classList.remove("task--expired");let s=c.querySelector(".task__info-expired");s&&s.remove()}})}function dt(){document.querySelectorAll(".button-complete-task").forEach(e=>{e.addEventListener("click",function(o){let r=o.target.closest(".task");r.classList.contains("task--completed")?jt(r):Mt(r)})})}function jt(t){let e=t.querySelector(".task__title s");e&&(e.parentNode.textContent=e.textContent),t.classList.remove("task--completed"),t.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#checkmark");let r=t.dataset.id;document.querySelectorAll('.list-with-tasks__wrapper .task[data-id="'+r+'"]').forEach(c=>{let i=c.querySelector(".task__title s");i&&(i.parentNode.textContent=i.textContent),c.classList.remove("task--completed"),c.querySelector(".task__circle svg").querySelector("use").setAttribute("href","icons/stack.svg#checkmark")});let a=document.querySelector(".tasks__header-button--active").textContent.trim();B(a),V()}function V(){let t=lt.querySelectorAll(".task"),e=new Date;e.setHours(0,0,0,0),t.forEach(o=>{let r=o.querySelector(".task__data").textContent.trim();if(r==="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"){o.classList.add("task--hidden");return}let[,n,a]=r.match(/(\d+)\s+(\S+)/);if(new Date(e.getFullYear(),rt(a),parseInt(n)).getTime()<e.getTime()){o.classList.add("task--expired");let i=o.querySelector(".task__info-wrapper");if(!i.querySelector(".task__info-expired")){let l=document.createElement("span");l.classList.add("task__info-expired"),l.textContent="\u0417\u0430\u0434\u0430\u0447\u0430 \u043F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u0430",i.insertBefore(l,i.firstChild)}document.querySelector(".tasks__header-button--active").textContent!=="\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043D\u044B\u0435"&&o.classList.add("task--hidden")}else{o.classList.remove("task--expired");let i=o.querySelector(".task__info-expired");i&&i.remove()}})}var Nt=document.querySelectorAll(".nav__item a"),Pt=document.querySelectorAll(".nav__link"),Bt=document.querySelector(".app-header__title"),Ft=document.querySelectorAll(".manager-item");Nt.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),Ft.forEach(d=>{d.innerHTML=""}),document.querySelectorAll(".tasks__header-button").forEach(d=>{d.classList.remove("tasks__header-button--active"),d.textContent.trim()==="\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435"&&d.classList.add("tasks__header-button--active");let k=document.querySelector(".tasks__header-button--active").textContent.trim();B(k)}),I();let r=document.querySelectorAll(".task"),n=document.querySelectorAll(".project");r.forEach(d=>{d.classList.remove("task--edit")}),n.forEach(d=>{d.classList.remove("project--edit")}),W.forEach(d=>{d.classList.remove("new-item--disabled")}),Pt.forEach(d=>{d.classList.remove("nav__link--active")}),t.classList.add("nav__link--active"),P.classList.remove("sidebar--open");let a=t.textContent;Bt.textContent=a;let c=t.getAttribute("data-section"),i=document.querySelectorAll(".section");for(var l=0;l<i.length;l++)i[l].style.display="none";let s=document.getElementById(c);s&&(s.style.display="block")})});var Yt=t=>t.key==="Escape",G=t=>e=>{Yt(e)&&(e.preventDefault(),t())};function ut(){return Math.random().toString(36).substr(2,9)}var pt=function(){let t=0;return function(){return t++,t}}(),mt=()=>{let t=new Date,e=t.getDate(),o=["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],r=t.getMonth(),n=o[r];return`${e} ${n}`};function w(t,e,o,r,n){t.value.trim().length>e?(o.textContent=r,t.classList.add("has-error"),n.disabled=!0):(o.textContent="",t.classList.remove("has-error"),n.disabled=!1)}function M(t,e,o){let r=t.value.trim()!=="",n=!t.classList.contains("has-error"),a=!e.classList.contains("has-error");o.disabled=!r||!n||!a}function nt(t){let e=t.trim().split(" "),o=parseInt(e[0]),r=Ht(e[1]),n=new Date().getFullYear();return new Date(n,r,o)}function Ht(t){return{\u042F\u043D\u0432\u0430\u0440\u044C:0,\u0424\u0435\u0432\u0440\u0430\u043B\u044C:1,\u041C\u0430\u0440\u0442:2,\u0410\u043F\u0440\u0435\u043B\u044C:3,\u041C\u0430\u0439:4,\u0418\u044E\u043D\u044C:5,\u0418\u044E\u043B\u044C:6,\u0410\u0432\u0433\u0443\u0441\u0442:7,\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C:8,\u041E\u043A\u0442\u044F\u0431\u0440\u044C:9,\u041D\u043E\u044F\u0431\u0440\u044C:10,\u0414\u0435\u043A\u0430\u0431\u0440\u044C:11}[t]}function yt(){let t=new Date,e={rendered:!1,localDate:new Date,prevMonthLastDate:null,calWeekDays:["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],calMonthName:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0440\u0432\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],daysInMonth:function(o,r){return new Date(r,o,0).getDate()},firstDay:function(){return new Date(t.getFullYear(),t.getMonth(),1)},lastDay:function(){return new Date(t.getFullYear(),t.getMonth()+1,0)},firstDayNumber:function(){let o=e.firstDay().getDay();return o===0?7:o},lastDayNumber:function(){return e.lastDay().getDay()+1},getPreviousMonthLastDate:function(){return new Date(t.getFullYear(),t.getMonth(),0).getDate()},navigateToPreviousMonth:function(){t.setMonth(t.getMonth()-1),e.attachEventsOnNextPrev()},navigateToNextMonth:function(){t.setMonth(t.getMonth()+1),e.attachEventsOnNextPrev()},navigateToCurrentMonth:function(){let o=e.localDate.getMonth(),r=e.localDate.getFullYear();t.setMonth(o),t.setYear(r),e.attachEventsOnNextPrev()},displayYear:function(){let o=document.querySelector(".calendar .calendar-year-label");o.innerHTML=t.getFullYear()},displayMonth:function(){let o=document.querySelector(".calendar .calendar-month-label");o.innerHTML=e.calMonthName[t.getMonth()]},plotSelectors:function(){let o=document.querySelector(".calendar"),r=document.createElement("div");r.classList.add("calendar-inner");let n=document.createElement("div");n.classList.add("calendar-controls");let a=document.createElement("div");a.classList.add("calendar-prev");let c=document.createElement("a");c.setAttribute("href","#");let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("width","128"),i.setAttribute("height","128"),i.setAttribute("viewBox","0 0 128 128");let l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("fill","#666"),l.setAttribute("d","M88.2 3.8L35.8 56.23 28 64l7.8 7.78 52.4 52.4 9.78-7.76L45.58 64l52.4-52.4z"),i.appendChild(l),c.appendChild(i),a.appendChild(c);let s=document.createElement("div");s.classList.add("calendar-year-month");let d=document.createElement("div");d.classList.add("calendar-month-label");let k=document.createElement("div");k.textContent="-";let E=document.createElement("div");E.classList.add("calendar-year-label"),s.appendChild(d),s.appendChild(k),s.appendChild(E);let u=document.createElement("div");u.classList.add("calendar-next");let _=document.createElement("a");_.setAttribute("href","#");let m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("xmlns","http://www.w3.org/2000/svg"),m.setAttribute("width","128"),m.setAttribute("height","128"),m.setAttribute("viewBox","0 0 128 128");let S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("fill","#666"),S.setAttribute("d","M38.8 124.2l52.4-52.42L99 64l-7.77-7.78-52.4-52.4-9.8 7.77L81.44 64 29 116.42z"),m.appendChild(S),_.appendChild(m),u.appendChild(_),n.appendChild(a),n.appendChild(s),n.appendChild(u);let v=document.createElement("div");v.classList.add("calendar-body"),r.appendChild(n),r.appendChild(v),o.appendChild(r)},plotDayNames:function(){let o=document.querySelector(".calendar .calendar-body");e.calWeekDays.forEach(r=>{let n=document.createElement("div");n.textContent=r,o.appendChild(n)})},plotDates:function(){let o=document.querySelector(".calendar .calendar-body");e.rendered||(e.plotSelectors(),e.rendered=!0),o.innerHTML="",e.plotDayNames(),e.displayMonth(),e.displayYear();let r=1,n=0;e.prevMonthLastDate=e.getPreviousMonthLastDate();let a=[],c=e.daysInMonth(t.getMonth()+1,t.getFullYear());for(let i=1;i<c;i++)if(i<e.firstDayNumber()){n+=1;let l=document.createElement("div");l.classList.add("prev-dates"),o.appendChild(l),a.push(e.prevMonthLastDate--)}else{let l=document.createElement("div");l.classList.add("number-item"),l.setAttribute("data-num",r);let s=document.createElement("a");s.classList.add("dateNumber"),s.href="#",s.textContent=r++,l.appendChild(s),o.appendChild(l)}for(let i=0;i<n+1;i++){let l=document.createElement("div");l.classList.add("number-item"),l.setAttribute("data-num",r);let s=document.createElement("a");s.classList.add("dateNumber"),s.href="#",s.textContent=r++,l.appendChild(s),o.appendChild(l)}e.highlightToday(),e.plotPrevMonthDates(a),e.plotNextMonthDates()},attachEvents:function(){let o=document.querySelector(".calendar .calendar-prev a"),r=document.querySelector(".calendar .calendar-next a"),n=document.querySelectorAll(".calendar .dateNumber");o.addEventListener("click",e.navigateToPreviousMonth),r.addEventListener("click",e.navigateToNextMonth);for(var a=0;a<n.length;a++)n[a].addEventListener("click",e.selectDate,!1)},highlightToday:function(){let o=e.localDate.getMonth()+1,r=t.getMonth()+1,n=e.localDate.getFullYear(),a=t.getFullYear();n===a&&o===r&&document.querySelectorAll(".number-item")&&document.querySelectorAll(".number-item")[t.getDate()-1].classList.add("calendar-today")},plotPrevMonthDates:function(o){o.reverse();for(let r=0;r<o.length;r++)document.querySelectorAll(".prev-dates")&&(document.querySelectorAll(".prev-dates")[r].textContent=o[r])},plotNextMonthDates:function(){let o=document.querySelector(".calendar-body").childElementCount;if(o>42){let r=49-o;e.loopThroughNextDays(r)}if(o>35&&o<=42){let r=42-o;e.loopThroughNextDays(42-o)}},loopThroughNextDays:function(o){let r=document.querySelector(".calendar-body");if(o>0)for(let n=1;n<=o;n++){let a=document.createElement("div");a.classList.add("next-dates"),a.textContent=n,r.appendChild(a)}},attachEventsOnNextPrev:function(){e.plotDates(),e.attachEvents()},init:function(){e.rendered||(e.plotSelectors(),e.rendered=!0),e.plotDates(),e.attachEvents()}};e.init()}function X(){document.querySelectorAll(".editor").forEach(e=>{e.addEventListener("input",()=>{e.style.height="auto",e.style.height=e.scrollHeight+"px"})})}function K(t){let e=document.getElementById("dateInput"),o=document.querySelector(".calendar"),r=document.getElementById("priorityInput"),n=document.querySelector(".popup-priority"),a=document.querySelectorAll(".popup-priority__item"),c=document.querySelector(".task-editor__priority-label"),i=document.getElementById("projectInput"),l=document.querySelector(".popup-project"),s=document.querySelector(".popup-project__list"),d=document.querySelector(".popup-project_btn-reset"),k=document.querySelector(".popup-project__list-empty"),E=new yt;function u(p,h,b){return function(A){A.stopPropagation(),p.classList.contains("task-editor__popup--open")?b():h()}}r.addEventListener("click",u(n,y,f)),i.addEventListener("click",u(l,j,T)),d.addEventListener("click",()=>{i.value="",T()}),a.forEach(function(p){p.addEventListener("click",function(){let h=p.textContent.trim();switch(r.value=h,c.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),h){case"\u0421\u0440\u043E\u0447\u043D\u043E":c.classList.add("task-editor__priority-label--priority1");break;case"\u0412\u0430\u0436\u043D\u043E":c.classList.add("task-editor__priority-label--priority2");break;case"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":c.classList.add("task-editor__priority-label--priority3");break;default:break}f()})}),e.value=t,e.addEventListener("click",()=>{o.style.display==="block"?x():F()}),o.addEventListener("click",function(p){if(p.target.classList.contains("dateNumber")){let h=p.target.textContent.trim(),b=o.querySelector(".calendar-month-label").textContent.trim();e.value=`${h} ${b}`,x()}});let _=G(f),m=G(T),S=G(x);function v(){x(),f(),T()}function g(p,h){v(),p.classList.add("task-editor__popup--open"),document.addEventListener("keydown",h)}function C(p,h){p.classList.remove("task-editor__popup--open"),document.removeEventListener("keydown",h)}function y(){g(n,_)}function f(){C(n,_)}function j(){g(l,m),L()}function T(){C(l,m)}function F(){v(),o.style.display="block",document.addEventListener("keydown",S)}function x(){o.style.display="none",document.removeEventListener("keydown",S)}function L(){let h=document.querySelector(".projects__list-wrapper").querySelectorAll(".project__title");s.innerHTML="",h.forEach(b=>{let A=document.createElement("li");A.classList.add("popup-project__item");let R=document.createElement("span");R.textContent=b.textContent.trim(),A.appendChild(R),s.appendChild(A),A.addEventListener("click",function(){let Y=A.textContent.trim();i.value=Y,T()})}),N()}function N(){document.querySelectorAll(".popup-project__list li").length===0?k.style.display="block":k.style.display="none"}document.addEventListener("click",function(p){!n.contains(p.target)&&p.target!==r&&f(),!l.contains(p.target)&&p.target!==i&&T(),!o.contains(p.target)&&p.target!==e&&x()})}function _t(t,e,o=null){document.querySelectorAll(t).forEach(n=>{n.addEventListener("click",()=>{let a=n.closest(e);if(a)if(o){let c=a.dataset.id;document.querySelectorAll(`${e}[${o}="${c}"]`).forEach(l=>{l.remove()})}else a.remove()})})}function ht(t,e,o,r,n,a){let c=document.querySelectorAll(t),i=document.querySelector(o);c.forEach(l=>{l.addEventListener("click",()=>{let s=l.closest(e);if(s.classList.add(`${e.slice(1)}--edit`),s){let d=s.dataset.id,k=s.querySelector(r).textContent.trim(),E=s.querySelector(n).textContent.trim(),u=i.content.cloneNode(!0).querySelector(".task-editor"),_=u.querySelector('[name="title_task"]'),m=u.querySelector('[name="discription_task"]'),S=u.querySelector('[name="data_task"]'),v=u.querySelector('[name="priority_task"]'),g=u.querySelector('[name="project_task"]'),C=u.querySelector(".task-editor__priority-label"),y=u.querySelector(".task-editor__submit-btn"),f=document.createElement("span"),j=document.createElement("span");_.value=k,m.value=E,f.classList.add("task-editor__error"),j.classList.add("task-editor__error"),_.parentNode.appendChild(f),m.parentNode.appendChild(j),_.addEventListener("input",()=>{w(_,H,f,D.TITLE,y),M(_,m,y)}),m.addEventListener("input",()=>{w(m,O,j,D.DISC,y),M(_,m,y)}),M(_,m,y),y.querySelector("use").setAttribute("href","icons/stack.svg#checkmark"),y.addEventListener("click",()=>{if(w(_,H,f,D.TITLE,y),w(m,O,j,D.DISC,y),_.classList.contains("has-error")||m.classList.contains("has-error"))return;let L=_.value.trim(),N=m.value.trim();if(s.querySelector(r).textContent=L,s.querySelector(n).textContent=N,a){let h=S.value.trim(),b=v.value.trim(),A=g.value.trim();document.querySelectorAll(`.task[data-id="${d}"]`).forEach(Y=>{Y.querySelector(".task__title").textContent=L,Y.querySelector(".task__discription").textContent=N,Y.querySelector(".task__data").textContent=h,Y.querySelector(".task__project").textContent=A;let $=Y.querySelector(".task__circle");$.classList.remove("task__circle--priority1","task__circle--priority2","task__circle--priority3"),b==="\u0421\u0440\u043E\u0447\u043D\u043E"?$.classList.add("task__circle--priority1"):b==="\u0412\u0430\u0436\u043D\u043E"?$.classList.add("task__circle--priority2"):b==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&$.classList.add("task__circle--priority3")})}u.classList.add("task-editor--hidden"),u.addEventListener("transitionend",function h(){s.classList.remove(`${e.slice(1)}--edit`),u.remove(),u.removeEventListener("transitionend",h)},{once:!0}),I(),V();let p=document.querySelector(".tasks__header-button--active").textContent.trim();B(p)});let F=s.closest(".list, .projects__list").querySelector(".manager-item");F.innerHTML="",F.appendChild(u),u.classList.add("task-editor--visible");let x=u.querySelector(".task-editor__close-btn");if(x&&x.addEventListener("click",()=>{u.classList.add("task-editor--hidden"),u.addEventListener("transitionend",function L(){s.classList.remove(`${e.slice(1)}--edit`),u.remove(),u.removeEventListener("transitionend",L)},{once:!0})}),a){let L=s.querySelector(".task__data").textContent.trim(),N=s.querySelector(".task__project").textContent.trim(),p=s.querySelector(".task__circle").classList.contains("task__circle--priority1")?"\u0421\u0440\u043E\u0447\u043D\u043E":s.querySelector(".task__circle").classList.contains("task__circle--priority2")?"\u0412\u0430\u0436\u043D\u043E":s.querySelector(".task__circle").classList.contains("task__circle--priority3")?"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":"";S.value=L,g.value=N,v.value=p,p==="\u0421\u0440\u043E\u0447\u043D\u043E"?C.classList.add("task-editor__priority-label--priority1"):p==="\u0412\u0430\u0436\u043D\u043E"?C.classList.add("task-editor__priority-label--priority2"):p==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&C.classList.add("task-editor__priority-label--priority3"),K(L)}X()}})})}function kt(){_t(".button-delete-task",".task","data-id")}function ft(){_t(".button-delete-project",".project")}function Lt(){ht(".button-edit-task",".task","#task-editor",".task__title",".task__discription",!0)}function vt(){ht(".button-edit-project",".project","#project-editor",".project__title",".project__discription",!1)}var Ot=document.querySelector("#task"),Vt=document.querySelector("#project"),$t=document.querySelector("#project-editor"),Wt=document.querySelector("#task-editor"),Ut=document.querySelectorAll(".list-with-tasks"),Gt=document.querySelectorAll(".projects__list");W.forEach(t=>{let e=t.querySelector(".new-item__task"),o=t.closest(".list"),r=o&&o.classList.contains("projects__list");e.addEventListener("click",()=>{let a=(r?$t:Wt).content.cloneNode(!0),c=a.querySelector(".task-editor");if(c&&o){let l=o.querySelector(".manager-item");if(l){l.innerHTML="",l.appendChild(a),c.classList.add("task-editor--visible"),t.classList.add("new-item--disabled");let s=c.querySelector('[name="title_task"]'),d=c.querySelector('[name="discription_task"]'),k=c.querySelector(".task-editor__submit-btn"),E=document.createElement("span"),u=document.createElement("span");E.classList.add("task-editor__error"),u.classList.add("task-editor__error"),s.parentNode.appendChild(E),d.parentNode.appendChild(u),s.addEventListener("input",()=>{w(s,H,E,D.TITLE,k),M(s,d,k)}),d.addEventListener("input",()=>{w(d,O,u,D.DISC,k),M(s,d,k)}),M(s,d,k),k.addEventListener("click",()=>{if(w(s,H,E,D.TITLE,k),w(d,O,u,D.DISC,k),s.classList.contains("has-error")||d.classList.contains("has-error"))return;let _=s.value,m=d.value;if(r)Gt.forEach(v=>{let g=Vt.content.cloneNode(!0),C=g.querySelector(".project__title"),y=g.querySelector(".project__discription");C.textContent=_,y.textContent=m,v.querySelector(".projects__list-wrapper").appendChild(g),vt(),ft()});else{let v=ut(),g=pt();Ut.forEach(C=>{let y=Ot.content.cloneNode(!0),f=y.querySelector(".task");f.dataset.id=v,f.dataset.order=g;let j=y.querySelector(".task__title"),T=y.querySelector(".task__discription"),F=y.querySelector(".task__data"),x=y.querySelector(".task__project"),L=y.querySelector(".task__circle"),N=document.querySelector(".task-editor__priority-label"),p=c.querySelector('[name="data_task"]').value,h=c.querySelector('[name="priority_task"]').value,b=c.querySelector('[name="project_task"]').value;j.textContent=_,T.textContent=m,F.textContent=p,p||(F.textContent="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"),x.textContent=b,h==="\u0421\u0440\u043E\u0447\u043D\u043E"?L.classList.add("task__circle--priority1"):h==="\u0412\u0430\u0436\u043D\u043E"?L.classList.add("task__circle--priority2"):h==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&L.classList.add("task__circle--priority3"),N.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),C.querySelector(".list-with-tasks__wrapper").appendChild(y),Lt(),kt()})}c.reset(),M(s,d,k),I(),V();let S=document.querySelector(".tasks__header-button--active").textContent.trim();B(S),dt()}),r||K(mt()),X()}}let i=c.querySelector(".task-editor__close-btn");i&&i.addEventListener("click",()=>{c.classList.add("task-editor--hidden"),c.addEventListener("transitionend",function l(){c.remove(),t.classList.remove("new-item--disabled"),c.removeEventListener("transitionend",l)},{once:!0})})})});var St=document.querySelector(".dashboard__select-control"),st=document.querySelector(".dashboard .list-with-tasks__wrapper"),z=document.querySelector(".tasks .list-with-tasks__wrapper");St.addEventListener("change",function(){let t=St.value;t==="priority"?qt(st):t==="name"?Et(st):Ct(st)});var gt=document.querySelector(".tasks__select-control");gt.addEventListener("change",function(){let t=gt.value;t==="priority"?qt(z):t==="name"?Et(z):t==="date"?Xt(z):Ct(z)});function qt(t){let e=Array.from(t.querySelectorAll("li"));e.sort((o,r)=>{let n=bt(o.querySelector(".task__circle")),a=bt(r.querySelector(".task__circle"));return n-a}),e.forEach(o=>t.appendChild(o))}function Et(t){let e=Array.from(t.querySelectorAll("li"));e.sort((o,r)=>{let n=o.querySelector(".task__title").textContent.toLowerCase(),a=r.querySelector(".task__title").textContent.toLowerCase();return n.localeCompare(a)}),e.forEach(o=>t.appendChild(o))}function Ct(t){let e=Array.from(t.querySelectorAll("li"));e.sort((o,r)=>{let n=parseInt(o.dataset.order),a=parseInt(r.dataset.order);return n-a}),e.forEach(o=>t.appendChild(o))}function Xt(t){let e=Array.from(t.querySelectorAll("li"));e.sort((o,r)=>{let n=nt(o.querySelector(".task__data").textContent),a=nt(r.querySelector(".task__data").textContent);return n-a}),e.forEach(o=>t.appendChild(o))}function bt(t){let e={"task__circle--priority1":1,"task__circle--priority2":2,"task__circle--priority3":3,task__circle:4},o=Array.from(t.classList).find(r=>r.startsWith("task__circle--priority"));return o?e[o]:e.task__circle}
