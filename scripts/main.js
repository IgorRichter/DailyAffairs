var J=n=>n.key==="Escape",I=n=>e=>{J(e)&&(e.preventDefault(),n())};function Y(){let n=new Date,e={rendered:!1,localDate:new Date,prevMonthLastDate:null,calWeekDays:["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],calMonthName:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0440\u0432\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],daysInMonth:function(t,o){return new Date(o,t,0).getDate()},firstDay:function(){return new Date(n.getFullYear(),n.getMonth(),1)},lastDay:function(){return new Date(n.getFullYear(),n.getMonth()+1,0)},firstDayNumber:function(){let t=e.firstDay().getDay();return t===0?7:t},lastDayNumber:function(){return e.lastDay().getDay()+1},getPreviousMonthLastDate:function(){return new Date(n.getFullYear(),n.getMonth(),0).getDate()},navigateToPreviousMonth:function(){n.setMonth(n.getMonth()-1),e.attachEventsOnNextPrev()},navigateToNextMonth:function(){n.setMonth(n.getMonth()+1),e.attachEventsOnNextPrev()},navigateToCurrentMonth:function(){let t=e.localDate.getMonth(),o=e.localDate.getFullYear();n.setMonth(t),n.setYear(o),e.attachEventsOnNextPrev()},displayYear:function(){let t=document.querySelector(".calendar .calendar-year-label");t.innerHTML=n.getFullYear()},displayMonth:function(){let t=document.querySelector(".calendar .calendar-month-label");t.innerHTML=e.calMonthName[n.getMonth()]},plotSelectors:function(){let t=document.querySelector(".calendar"),o=document.createElement("div");o.classList.add("calendar-inner");let r=document.createElement("div");r.classList.add("calendar-controls");let a=document.createElement("div");a.classList.add("calendar-prev");let i=document.createElement("a");i.setAttribute("href","#");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("width","128"),l.setAttribute("height","128"),l.setAttribute("viewBox","0 0 128 128");let c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("fill","#666"),c.setAttribute("d","M88.2 3.8L35.8 56.23 28 64l7.8 7.78 52.4 52.4 9.78-7.76L45.58 64l52.4-52.4z"),l.appendChild(c),i.appendChild(l),a.appendChild(i);let s=document.createElement("div");s.classList.add("calendar-year-month");let m=document.createElement("div");m.classList.add("calendar-month-label");let E=document.createElement("div");E.textContent="-";let _=document.createElement("div");_.classList.add("calendar-year-label"),s.appendChild(m),s.appendChild(E),s.appendChild(_);let v=document.createElement("div");v.classList.add("calendar-next");let g=document.createElement("a");g.setAttribute("href","#");let y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttribute("xmlns","http://www.w3.org/2000/svg"),y.setAttribute("width","128"),y.setAttribute("height","128"),y.setAttribute("viewBox","0 0 128 128");let p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("fill","#666"),p.setAttribute("d","M38.8 124.2l52.4-52.42L99 64l-7.77-7.78-52.4-52.4-9.8 7.77L81.44 64 29 116.42z"),y.appendChild(p),g.appendChild(y),v.appendChild(g),r.appendChild(a),r.appendChild(s),r.appendChild(v);let f=document.createElement("div");f.classList.add("calendar-body"),o.appendChild(r),o.appendChild(f),t.appendChild(o)},plotDayNames:function(){let t=document.querySelector(".calendar .calendar-body");e.calWeekDays.forEach(o=>{let r=document.createElement("div");r.textContent=o,t.appendChild(r)})},plotDates:function(){let t=document.querySelector(".calendar .calendar-body");e.rendered||(e.plotSelectors(),e.rendered=!0),t.innerHTML="",e.plotDayNames(),e.displayMonth(),e.displayYear();let o=1,r=0;e.prevMonthLastDate=e.getPreviousMonthLastDate();let a=[],i=e.daysInMonth(n.getMonth()+1,n.getFullYear());for(let l=1;l<i;l++)if(l<e.firstDayNumber()){r+=1;let c=document.createElement("div");c.classList.add("prev-dates"),t.appendChild(c),a.push(e.prevMonthLastDate--)}else{let c=document.createElement("div");c.classList.add("number-item"),c.setAttribute("data-num",o);let s=document.createElement("a");s.classList.add("dateNumber"),s.href="#",s.textContent=o++,c.appendChild(s),t.appendChild(c)}for(let l=0;l<r+1;l++){let c=document.createElement("div");c.classList.add("number-item"),c.setAttribute("data-num",o);let s=document.createElement("a");s.classList.add("dateNumber"),s.href="#",s.textContent=o++,c.appendChild(s),t.appendChild(c)}e.highlightToday(),e.plotPrevMonthDates(a),e.plotNextMonthDates()},attachEvents:function(){let t=document.querySelector(".calendar .calendar-prev a"),o=document.querySelector(".calendar .calendar-next a"),r=document.querySelectorAll(".calendar .dateNumber");t.addEventListener("click",e.navigateToPreviousMonth),o.addEventListener("click",e.navigateToNextMonth);for(var a=0;a<r.length;a++)r[a].addEventListener("click",e.selectDate,!1)},highlightToday:function(){let t=e.localDate.getMonth()+1,o=n.getMonth()+1,r=e.localDate.getFullYear(),a=n.getFullYear();r===a&&t===o&&document.querySelectorAll(".number-item")&&document.querySelectorAll(".number-item")[n.getDate()-1].classList.add("calendar-today")},plotPrevMonthDates:function(t){t.reverse();for(let o=0;o<t.length;o++)document.querySelectorAll(".prev-dates")&&(document.querySelectorAll(".prev-dates")[o].textContent=t[o])},plotNextMonthDates:function(){let t=document.querySelector(".calendar-body").childElementCount;if(t>42){let o=49-t;e.loopThroughNextDays(o)}if(t>35&&t<=42){let o=42-t;e.loopThroughNextDays(42-t)}},loopThroughNextDays:function(t){let o=document.querySelector(".calendar-body");if(t>0)for(let r=1;r<=t;r++){let a=document.createElement("div");a.classList.add("next-dates"),a.textContent=r,o.appendChild(a)}},attachEventsOnNextPrev:function(){e.plotDates(),e.attachEvents()},init:function(){e.rendered||(e.plotSelectors(),e.rendered=!0),e.plotDates(),e.attachEvents()}};e.init()}function H(){document.querySelectorAll(".editor").forEach(e=>{e.addEventListener("input",()=>{e.style.height="auto",e.style.height=e.scrollHeight+"px"})})}function O(){let n=document.querySelectorAll(".editor"),e=document.getElementById("dateInput"),t=document.querySelector(".calendar"),o=document.getElementById("priorityInput"),r=document.querySelector(".task-editor__priority-label"),a=document.querySelector(".popup-priority"),i=document.querySelectorAll(".popup-priority__item"),l=document.getElementById("projectInput"),c=document.querySelector(".popup-project"),s=document.querySelector(".popup-project__list"),m=document.querySelector(".popup-project__list-empty"),E=new Y;function _(d,h,j){return function(D){D.stopPropagation(),d.classList.contains("task-editor__popup--open")?j():h()}}o.addEventListener("click",_(a,x,b)),l.addEventListener("click",_(c,M,C)),i.forEach(function(d){d.addEventListener("click",function(){let h=d.textContent.trim();switch(o.value=h,r.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),h){case"\u0421\u0440\u043E\u0447\u043D\u043E":r.classList.add("task-editor__priority-label--priority1");break;case"\u0412\u0430\u0436\u043D\u043E":r.classList.add("task-editor__priority-label--priority2");break;case"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":r.classList.add("task-editor__priority-label--priority3");break;default:break}b()})});let v=new Date,g=v.getDate(),y=["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"],p=v.getMonth(),f=y[p];e.value=`${g} ${f}`,e.addEventListener("click",()=>{t.style.display==="block"?T():z()}),t.addEventListener("click",function(d){if(d.target.classList.contains("dateNumber")){let h=d.target.textContent.trim(),j=t.querySelector(".calendar-month-label").textContent.trim();e.value=`${h} ${j}`,T()}});let L=I(b),u=I(C),S=I(T);function w(){T(),b(),C()}function q(d,h){w(),d.classList.add("task-editor__popup--open"),document.addEventListener("keydown",h)}function A(d,h){d.classList.remove("task-editor__popup--open"),document.removeEventListener("keydown",h)}function x(){q(a,L)}function b(){A(a,L)}function M(){q(c,u),G()}function C(){A(c,u)}function z(){w(),t.style.display="block",document.addEventListener("keydown",S)}function T(){t.style.display="none",document.removeEventListener("keydown",S)}function G(){let h=document.querySelector(".projects__list-wrapper").querySelectorAll(".project__title");s.innerHTML="",h.forEach(j=>{let D=document.createElement("li");D.classList.add("popup-project__item");let F=document.createElement("span");F.textContent=j.textContent.trim(),D.appendChild(F),s.appendChild(D),D.addEventListener("click",function(){let X=D.textContent.trim();l.value=X,C()})}),U()}function U(){document.querySelectorAll(".popup-project__list li").length===0?m.style.display="block":m.style.display="none"}document.addEventListener("click",function(d){!a.contains(d.target)&&d.target!==o&&b(),!c.contains(d.target)&&d.target!==l&&C(),!t.contains(d.target)&&d.target!==e&&T()})}var k=document.querySelector(".sidebar"),N=document.querySelectorAll(".new-item");var V=100,W=500,P={TITLE:"\u0414\u043B\u0438\u043D\u0430 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 100 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",DISC:"\u0414\u043B\u0438\u043D\u0430 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 500 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."},Q=document.querySelector("#task"),R=document.querySelector("#project"),Z=document.querySelector("#project-editor"),ee=document.querySelector("#task-editor"),te=document.querySelectorAll(".list-with-tasks"),ne=document.querySelectorAll(".projects__list");N.forEach(n=>{let e=n.querySelector(".new-item__task"),t=n.closest(".list"),o=t&&t.classList.contains("projects__list");e.addEventListener("click",()=>{let a=(o?Z:ee).content.cloneNode(!0),i=a.querySelector(".task-editor");if(i&&t){let c=t.querySelector(".manager-item");if(c){let g=function(p,f,L,u){p.value.trim().length>f?(L.textContent=u,p.classList.add("has-error"),E.disabled=!0):(L.textContent="",p.classList.remove("has-error"),E.disabled=!1)},y=function(){let p=s.value.trim()!=="",f=!s.classList.contains("has-error"),L=!m.classList.contains("has-error");E.disabled=!p||!f||!L};c.innerHTML="",c.appendChild(a),i.classList.add("task-editor--visible"),n.classList.add("new-item--disabled");let s=i.querySelector('[name="title_task"]'),m=i.querySelector('[name="discription_task"]'),E=i.querySelector(".task-editor__submit-btn"),_=document.createElement("span"),v=document.createElement("span");_.classList.add("task-editor__error"),v.classList.add("task-editor__error"),s.parentNode.appendChild(_),m.parentNode.appendChild(v),s.addEventListener("input",()=>{g(s,V,_,P.TITLE),y()}),m.addEventListener("input",()=>{g(m,W,v,P.DISC),y()}),y(),E.addEventListener("click",()=>{if(g(s,V,_,P.TITLE),g(m,W,v,P.DISC),s.classList.contains("has-error")||m.classList.contains("has-error"))return;let p=s.value,f=m.value;o?ne.forEach(L=>{let u=R.content.cloneNode(!0),S=u.querySelector(".project__title"),w=u.querySelector(".project__discription");S.textContent=p,w.textContent=f,L.querySelector(".projects__list-wrapper").appendChild(u)}):te.forEach(L=>{let u=Q.content.cloneNode(!0),S=u.querySelector(".task__title"),w=u.querySelector(".task__discription"),q=u.querySelector(".task__data"),A=u.querySelector(".task__project"),x=u.querySelector(".task__circle"),b=i.querySelector('[name="data_task"]').value,M=i.querySelector('[name="priority_task"]').value,C=i.querySelector('[name="project_task"]').value;S.textContent=p,w.textContent=f,q.textContent=b,b||(q.textContent="\u0411\u0435\u0437 \u0441\u0440\u043E\u043A\u0430"),A.textContent=C,M==="\u0421\u0440\u043E\u0447\u043D\u043E"?x.classList.add("task__circle--priority1"):M==="\u0412\u0430\u0436\u043D\u043E"?x.classList.add("task__circle--priority2"):M==="\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"&&x.classList.add("task__circle--priority3"),L.querySelector(".list-with-tasks__wrapper").appendChild(u)}),i.reset(),y()}),o||O(),H()}}let l=i.querySelector(".task-editor__close-btn");l&&l.addEventListener("click",()=>{i.classList.add("task-editor--hidden"),i.addEventListener("transitionend",function c(){i.remove(),n.classList.remove("new-item--disabled"),i.removeEventListener("transitionend",c)},{once:!0})})})});var oe=document.querySelectorAll(".nav__item a"),re=document.querySelectorAll(".nav__link"),ae=document.querySelector(".app-header__title"),ce=document.querySelectorAll(".manager-item");oe.forEach(n=>{n.addEventListener("click",e=>{e.preventDefault(),ce.forEach(l=>{l.innerHTML=""}),N.forEach(l=>{l.classList.remove("new-item--disabled")}),re.forEach(l=>{l.classList.remove("nav__link--active")}),n.classList.add("nav__link--active"),k.classList.remove("sidebar--open");let t=n.textContent;ae.textContent=t;let o=n.getAttribute("data-section"),r=document.querySelectorAll(".section");for(var a=0;a<r.length;a++)r[a].style.display="none";let i=document.getElementById(o);i&&(i.style.display="block")})});var $=document.querySelector(".sidebar__button"),B=document.querySelector(".dropdown-menu"),se=document.querySelector(".dropdown-menu__item--arrow"),le=document.querySelector(".dropdown-menu__submenu"),K=document.querySelector(".sidebar__user-button");$.addEventListener("click",()=>{k.classList.toggle("sidebar--open"),document.body.style.overflow=k.classList.contains("sidebar--open")?"hidden":"auto"});K.addEventListener("click",()=>{B.classList.toggle("dropdown-menu--open")});se.addEventListener("click",()=>{le.classList.toggle("dropdown-menu__submenu--open")});document.addEventListener("click",n=>{!k.contains(n.target)&&!$.contains(n.target)&&(k.classList.remove("sidebar--open"),document.body.style.overflow=k.classList.contains("sidebar--open")?"hidden":"auto"),!B.contains(n.target)&&!K.contains(n.target)&&B.classList.remove("dropdown-menu--open")});
