var P=t=>t.key==="Escape",c=t=>e=>{P(e)&&(e.preventDefault(),t())};var v=document.querySelectorAll(".editor"),d=document.getElementById("dateInput"),o=document.querySelector(".calendar"),u=document.getElementById("priorityInput"),p=document.querySelector(".task-editor__priority-label"),s=document.querySelector(".popup-priority"),h=document.querySelectorAll(".popup-priority__item"),y=document.getElementById("projectInput"),a=document.querySelector(".popup-project"),I=document.querySelectorAll(".popup-project__item");v.forEach(t=>{t.addEventListener("input",()=>{t.style.height="auto",t.style.height=t.scrollHeight+"px"})});function m(t,e,l){return function(b){b.stopPropagation(),t.classList.contains("task-editor__popup--open")?l():e()}}u.addEventListener("click",m(s,j,n));y.addEventListener("click",m(a,q,r));h.forEach(function(t){t.addEventListener("click",function(){let e=t.textContent.trim();switch(u.value=e,p.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),e){case"\u0421\u0440\u043E\u0447\u043D\u043E":p.classList.add("task-editor__priority-label--priority1");break;case"\u0412\u0430\u0436\u043D\u043E":p.classList.add("task-editor__priority-label--priority2");break;case"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":p.classList.add("task-editor__priority-label--priority3");break;default:break}n()})});I.forEach(function(t){t.addEventListener("click",function(){let e=t.textContent.trim();y.value=e,r()})});d.addEventListener("click",()=>{o.style.display==="block"?i():C()});o.addEventListener("click",function(t){if(t.target.classList.contains("dateNumber")){let e=t.target.textContent.trim(),l=o.querySelector(".calendar-month-label").textContent.trim();d.value=`${e} ${l}`,i()}});var f=c(n),k=c(r),_=c(i);function L(){i(),n(),r()}function E(t,e){L(),t.classList.add("task-editor__popup--open"),document.addEventListener("keydown",e)}function g(t,e){t.classList.remove("task-editor__popup--open"),document.removeEventListener("keydown",e)}function j(){E(s,f)}function n(){g(s,f)}function q(){E(a,k)}function r(){g(a,k)}function C(){L(),o.style.display="block",document.addEventListener("keydown",_)}function i(){o.style.display="none",document.removeEventListener("keydown",_)}document.addEventListener("click",function(t){!s.contains(t.target)&&t.target!==u&&n(),!a.contains(t.target)&&t.target!==y&&r(),!o.contains(t.target)&&t.target!==d&&i()});
