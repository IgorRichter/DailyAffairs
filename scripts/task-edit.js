var H=o=>o.key==="Escape",M=o=>e=>{H(e)&&(e.preventDefault(),o())};function q(){let o=new Date,e={rendered:!1,localDate:new Date,prevMonthLastDate:null,calWeekDays:["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],calMonthName:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0440\u0432\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],daysInMonth:function(t,n){return new Date(n,t,0).getDate()},firstDay:function(){return new Date(o.getFullYear(),o.getMonth(),1)},lastDay:function(){return new Date(o.getFullYear(),o.getMonth()+1,0)},firstDayNumber:function(){let t=e.firstDay().getDay();return t===0?7:t},lastDayNumber:function(){return e.lastDay().getDay()+1},getPreviousMonthLastDate:function(){return new Date(o.getFullYear(),o.getMonth(),0).getDate()},navigateToPreviousMonth:function(){o.setMonth(o.getMonth()-1),e.attachEventsOnNextPrev()},navigateToNextMonth:function(){o.setMonth(o.getMonth()+1),e.attachEventsOnNextPrev()},navigateToCurrentMonth:function(){let t=e.localDate.getMonth(),n=e.localDate.getFullYear();o.setMonth(t),o.setYear(n),e.attachEventsOnNextPrev()},displayYear:function(){let t=document.querySelector(".calendar .calendar-year-label");t.innerHTML=o.getFullYear()},displayMonth:function(){let t=document.querySelector(".calendar .calendar-month-label");t.innerHTML=e.calMonthName[o.getMonth()]},plotSelectors:function(){let t=document.querySelector(".calendar"),n=document.createElement("div");n.classList.add("calendar-inner");let a=document.createElement("div");a.classList.add("calendar-controls");let r=document.createElement("div");r.classList.add("calendar-prev");let p=document.createElement("a");p.setAttribute("href","#");let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("width","128"),i.setAttribute("height","128"),i.setAttribute("viewBox","0 0 128 128");let c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("fill","#666"),c.setAttribute("d","M88.2 3.8L35.8 56.23 28 64l7.8 7.78 52.4 52.4 9.78-7.76L45.58 64l52.4-52.4z"),i.appendChild(c),p.appendChild(i),r.appendChild(p);let d=document.createElement("div");d.classList.add("calendar-year-month");let y=document.createElement("div");y.classList.add("calendar-month-label");let w=document.createElement("div");w.textContent="-";let f=document.createElement("div");f.classList.add("calendar-year-label"),d.appendChild(y),d.appendChild(w),d.appendChild(f);let h=document.createElement("div");h.classList.add("calendar-next");let v=document.createElement("a");v.setAttribute("href","#");let u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("xmlns","http://www.w3.org/2000/svg"),u.setAttribute("width","128"),u.setAttribute("height","128"),u.setAttribute("viewBox","0 0 128 128");let g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttribute("fill","#666"),g.setAttribute("d","M38.8 124.2l52.4-52.42L99 64l-7.77-7.78-52.4-52.4-9.8 7.77L81.44 64 29 116.42z"),u.appendChild(g),v.appendChild(u),h.appendChild(v),a.appendChild(r),a.appendChild(d),a.appendChild(h);let C=document.createElement("div");C.classList.add("calendar-body"),n.appendChild(a),n.appendChild(C),t.appendChild(n)},plotDayNames:function(){let t=document.querySelector(".calendar .calendar-body");e.calWeekDays.forEach(n=>{let a=document.createElement("div");a.textContent=n,t.appendChild(a)})},plotDates:function(){let t=document.querySelector(".calendar .calendar-body");e.rendered||(e.plotSelectors(),e.rendered=!0),t.innerHTML="",e.plotDayNames(),e.displayMonth(),e.displayYear();let n=1,a=0;e.prevMonthLastDate=e.getPreviousMonthLastDate();let r=[],p=e.daysInMonth(o.getMonth()+1,o.getFullYear());for(let i=1;i<p;i++)if(i<e.firstDayNumber()){a+=1;let c=document.createElement("div");c.classList.add("prev-dates"),t.appendChild(c),r.push(e.prevMonthLastDate--)}else{let c=document.createElement("div");c.classList.add("number-item"),c.setAttribute("data-num",n);let d=document.createElement("a");d.classList.add("dateNumber"),d.href="#",d.textContent=n++,c.appendChild(d),t.appendChild(c)}for(let i=0;i<a+1;i++){let c=document.createElement("div");c.classList.add("number-item"),c.setAttribute("data-num",n);let d=document.createElement("a");d.classList.add("dateNumber"),d.href="#",d.textContent=n++,c.appendChild(d),t.appendChild(c)}e.highlightToday(),e.plotPrevMonthDates(r),e.plotNextMonthDates()},attachEvents:function(){let t=document.querySelector(".calendar .calendar-prev a"),n=document.querySelector(".calendar .calendar-next a"),a=document.querySelectorAll(".calendar .dateNumber");t.addEventListener("click",e.navigateToPreviousMonth),n.addEventListener("click",e.navigateToNextMonth);for(var r=0;r<a.length;r++)a[r].addEventListener("click",e.selectDate,!1)},highlightToday:function(){let t=e.localDate.getMonth()+1,n=o.getMonth()+1,a=e.localDate.getFullYear(),r=o.getFullYear();a===r&&t===n&&document.querySelectorAll(".number-item")&&document.querySelectorAll(".number-item")[o.getDate()-1].classList.add("calendar-today")},plotPrevMonthDates:function(t){t.reverse();for(let n=0;n<t.length;n++)document.querySelectorAll(".prev-dates")&&(document.querySelectorAll(".prev-dates")[n].textContent=t[n])},plotNextMonthDates:function(){let t=document.querySelector(".calendar-body").childElementCount;if(t>42){let n=49-t;e.loopThroughNextDays(n)}if(t>35&&t<=42){let n=42-t;e.loopThroughNextDays(42-t)}},loopThroughNextDays:function(t){let n=document.querySelector(".calendar-body");if(t>0)for(let a=1;a<=t;a++){let r=document.createElement("div");r.classList.add("next-dates"),r.textContent=a,n.appendChild(r)}},attachEventsOnNextPrev:function(){e.plotDates(),e.attachEvents()},init:function(){e.rendered||(e.plotSelectors(),e.rendered=!0),e.plotDates(),e.attachEvents()}};e.init()}function z(){document.querySelectorAll(".editor").forEach(e=>{e.addEventListener("input",()=>{e.style.height="auto",e.style.height=e.scrollHeight+"px"})})}function V(){let o=document.querySelectorAll(".editor"),e=document.getElementById("dateInput"),t=document.querySelector(".calendar"),n=document.getElementById("priorityInput"),a=document.querySelector(".task-editor__priority-label"),r=document.querySelector(".popup-priority"),p=document.querySelectorAll(".popup-priority__item"),i=document.getElementById("projectInput"),c=document.querySelector(".popup-project"),d=document.querySelector(".popup-project__list"),y=document.querySelector(".popup-project__list-empty"),w=new q;function f(l,s,D){return function(m){m.stopPropagation(),l.classList.contains("task-editor__popup--open")?D():s()}}n.addEventListener("click",f(r,j,E)),i.addEventListener("click",f(c,I,L)),p.forEach(function(l){l.addEventListener("click",function(){let s=l.textContent.trim();switch(n.value=s,a.classList.remove("task-editor__priority-label--priority1","task-editor__priority-label--priority2","task-editor__priority-label--priority3"),s){case"\u0421\u0440\u043E\u0447\u043D\u043E":a.classList.add("task-editor__priority-label--priority1");break;case"\u0412\u0430\u0436\u043D\u043E":a.classList.add("task-editor__priority-label--priority2");break;case"\u0412\u0442\u043E\u0440\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E":a.classList.add("task-editor__priority-label--priority3");break;default:break}E()})});let h=new Date,v=h.getDate(),u=["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"],g=h.getMonth(),C=u[g];e.value=`${v} ${C}`,e.addEventListener("click",()=>{t.style.display==="block"?b():T()}),t.addEventListener("click",function(l){if(l.target.classList.contains("dateNumber")){let s=l.target.textContent.trim(),D=t.querySelector(".calendar-month-label").textContent.trim();e.value=`${s} ${D}`,b()}});let x=M(E),k=M(L),S=M(b);function _(){b(),E(),L()}function P(l,s){_(),l.classList.add("task-editor__popup--open"),document.addEventListener("keydown",s)}function N(l,s){l.classList.remove("task-editor__popup--open"),document.removeEventListener("keydown",s)}function j(){P(r,x)}function E(){N(r,x)}function I(){P(c,k),Y()}function L(){N(c,k)}function T(){_(),t.style.display="block",document.addEventListener("keydown",S)}function b(){t.style.display="none",document.removeEventListener("keydown",S)}function Y(){let s=document.querySelector(".projects__list-wrapper").querySelectorAll(".project__title");d.innerHTML="",s.forEach(D=>{let m=document.createElement("li");m.classList.add("popup-project__item");let A=document.createElement("span");A.textContent=D.textContent.trim(),m.appendChild(A),d.appendChild(m),m.addEventListener("click",function(){let F=m.textContent.trim();i.value=F,L()})}),B()}function B(){document.querySelectorAll(".popup-project__list li").length===0?y.style.display="block":y.style.display="none"}document.addEventListener("click",function(l){!r.contains(l.target)&&l.target!==n&&E(),!c.contains(l.target)&&l.target!==i&&L(),!t.contains(l.target)&&l.target!==e&&b()})}export{V as attachEventToPriorityInput,z as attachEventToTextarea};
